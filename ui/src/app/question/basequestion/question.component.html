<div id="dashboard">
    @if (newQuestion) {
        <xm-page-header text="i18n_toolbar_new_question" [prependTemplate]="linkBack" />
    } @else {
        <xm-page-header text="i18n_questions_edit" [prependTemplate]="linkBack" />
    }
    <xm-page-content [content]="content" />
</div>
<ng-template #linkBack>
    <img (click)="cancel()" class="pointer arrow_icon pe-3" src="/assets/images/icon_history.png" alt="go back" />
</ng-template>
<ng-template #content>
    <div class="row me-2">
        <!-- Question body //-->
        <div class="col-md-12 question-border px-4">
            <form role="form" #questionForm="ngForm" name="questionForm" novalidate>
                @if (question) {
                    <xm-question-body
                        [question]="question"
                        [currentOwners]="currentOwners"
                        [lotteryOn]="lotteryOn"
                        [examId]="examId"
                        [sectionQuestion]="sectionQuestion"
                        [collaborative]="collaborative"
                    ></xm-question-body>
                }
            </form>
            <!-- buttons -->

            <div class="d-flex flex-row-reverse mt-2">
                <button
                    [disabled]="
                        !question ||
                        !question.type ||
                        hasNoCorrectOption() ||
                        hasInvalidClaimChoiceOptions() ||
                        questionForm.invalid
                    "
                    (click)="saveQuestion()"
                    type="submit"
                    class="xm-ok-button"
                >
                    {{ 'i18n_save' | translate }}
                </button>

                <button (click)="cancel()" type="submit" class="xm-cancel-button me-2">
                    {{ 'i18n_button_cancel' | translate }}
                </button>
                <button
                    (click)="openPreview()"
                    type="submit"
                    class="xm-neutral-button me-2"
                    [disabled]="
                        !question ||
                        !question.type ||
                        hasNoCorrectOption() ||
                        hasInvalidClaimChoiceOptions() ||
                        questionForm.invalid
                    "
                >
                    {{ 'i18n_button_preview' | translate }}
                </button>
            </div>
        </div>
    </div>
</ng-template>
