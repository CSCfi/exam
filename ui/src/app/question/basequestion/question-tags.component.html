<!--
SPDX-FileCopyrightText: 2024 The members of the EXAM Consortium

SPDX-License-Identifier: EUPL-1.2
-->

@if (!collaborative()) {
    <div class="row mt-3 align-items-center">
        <label class="col-md-3 col-form-label" for="newTag">
            {{ 'i18n_tag_question' | translate }}
            <sup
                class="ms-1"
                ngbPopover="{{ 'i18n_question_tag_question_description' | translate }}"
                popoverTitle="{{ 'i18n_instructions' | translate }}"
                triggers="mouseenter:mouseleave"
            >
                <img src="/assets/images/icon_tooltip.svg" alt="" />
            </sup>
        </label>

        <div class="col-md-3">
            <div class="input-group">
                <input
                    id="newTag"
                    name="newTag"
                    maxlength="30"
                    class="form-control col-md-8"
                    [value]="currentTagName"
                    (input)="onTagNameInput($event)"
                    [ngbTypeahead]="getTags$"
                    (selectItem)="onTagSelect($event)"
                    [resultFormatter]="nameFormat"
                    [inputFormatter]="nameFormat"
                />
                <button
                    class="input-group-text btn btn-success"
                    (click)="addTag()"
                    [disabled]="!newTag || newTag.name.length < 2"
                >
                    {{ 'i18n_add' | translate }}
                </button>
            </div>
        </div>
        <div class="col">
            @for (tag of ownTags(); track tag) {
                {{ tag.name }}
                <button
                    class="btn btn-sm btn-link"
                    ngbPopover="{{ 'i18n_remove' | translate }}"
                    popoverTitle="{{ 'i18n_instructions' | translate }}"
                    triggers="mouseenter:mouseleave"
                    (click)="removeTag(tag)"
                    title="{{ 'i18n_remove' | translate }}"
                >
                    <i class="bi bi-x"></i>
                </button>
            }
        </div>
    </div>
}
