<!--
SPDX-FileCopyrightText: 2024 The members of the EXAM Consortium

SPDX-License-Identifier: EUPL-1.2
-->

<div [formGroup]="claimChoiceForm" name="claimChoice">
    <div class="row mt-2">
        <div class="col-md-6 col-sm-12">
            <p>{{ 'i18n_claim_choice_question_instruction' | translate }}</p>
            <p>{{ 'i18n_claim_choice_options_description' | translate }}</p>
            <ul>
                <li>{{ 'i18n_claim_choice_correct_points_description' | translate }}</li>
                <li>{{ 'i18n_claim_choice_incorrect_points_description' | translate }}</li>
                <li>{{ 'i18n_claim_choice_skip_option_description' | translate }}</li>
            </ul>
            <br />
            @if (showWarning()) {
                <div class="edit-warning-container">
                    <i class="bi-exclamation-circle text-danger me-2"></i>
                    <small>{{ 'i18n_shared_question_property_info' | translate }}</small>
                </div>
            }
        </div>
    </div>
    <div class="row ms-2 w-50 px-3 pb-2">
        <div class="col-9">
            <span class="question-option-title">{{ 'i18n_question_options' | translate | uppercase }}</span>
        </div>
        <div class="col ms-1">
            <span class="question-option-title">
                {{ 'i18n_word_points' | translate | uppercase }}
            </span>
        </div>
    </div>
    <div formArrayName="options">
        @for (opt of question().options; track opt.id; let index = $index) {
            <div
                class="row ms-2 w-50 question-editor-claim-choice-option"
                [ngClass]="getOptionClass(opt)"
                [formGroupName]="index"
            >
                <div class="col-9">
                    <textarea
                        name="{{ opt.claimChoiceType }}-question"
                        formControlName="optionText"
                        type="text"
                        rows="1"
                        class="question-option-input form-control"
                        required
                    ></textarea>
                </div>
                <div class="col">
                    <input
                        name="{{ opt.claimChoiceType }}-score"
                        class="question-option-input points"
                        type="number"
                        step="any"
                        lang="en"
                        xmFixedPrecision
                        formControlName="score"
                        required
                    />
                </div>
                <div class="claim-choice-option-description m-2">
                    {{ getOptionDescriptionTranslation(opt) | translate }}
                </div>
            </div>
        }
    </div>
</div>
<div class="row">
    <div class="col-md-9 claim-choice-warning-wrapper">
        @if (missingOption()) {
            <div class="claim-choice-warning">
                <i class="bi-exclamation-triangle"></i>
                {{ 'i18n_claim_choice_missing_options_warning' | translate }}
                {{ missingOption() | translate }}
            </div>
        }
    </div>
</div>
