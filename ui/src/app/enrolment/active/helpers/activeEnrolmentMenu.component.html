<!-- settings menu -->
<div ngbDropdown class="no-caret float-right" placement="bottom-right">
    <button ngbDropdownToggle class="btn btn-link infolink"><i class="bi-pencil"></i></button>
    <!-- TODO: create menu items in ts -->
    <ul ngbDropdownMenu aria-labelledby="simple-dropdown">
        <!-- enrolment with reservation, allow changing -->
        <li *ngIf="enrolment.reservation" ngbDropdownItem>
            <a
                *ngIf="enrolment.reservation.machine && enrolment.collaborativeExam"
                class="infolink-light"
                uiSref="collaborativeCalendar"
                [uiParams]="{ id: enrolment.collaborativeExam.id }"
                >{{ 'sitnet_student_change_reservation' | translate }}
            </a>
            <a
                *ngIf="enrolment.reservation.machine && !enrolment.collaborativeExam"
                class="infolink-light"
                uiSref="calendar"
                [uiParams]="{ id: enrolment.exam.id }"
                >{{ 'sitnet_student_change_reservation' | translate }}
            </a>
            <a
                *ngIf="enrolment.reservation.externalReservation && enrolment.exam"
                class="infolink-light"
                uiSref="externalCalendar"
                [uiParams]="{ id: enrolment.exam.id }"
                >{{ 'sitnet_student_change_reservation' | translate }}
            </a>
            <a
                *ngIf="enrolment.reservation.externalReservation && enrolment.collaborativeExam"
                class="infolink-light"
                uiSref="externalCalendar"
                [uiParams]="{ id: enrolment.collaborativeExam.id, isCollaborative: true }"
                >{{ 'sitnet_student_change_reservation' | translate }}
            </a>
        </li>
        <!-- enrolment with examination event, allow changing -->
        <li *ngIf="enrolment.examinationEventConfiguration && hasUpcomingAlternativeEvents()" ngbDropdownItem>
            <button class="infolink-light pointer" (click)="makeReservation()" tabindex="0">
                {{ 'sitnet_student_change_reservation' | translate }}
            </button>
        </li>
        <!-- enrolment with reservation, allow reservation removal -->
        <li *ngIf="enrolment.reservation" ngbDropdownItem>
            <button
                *ngIf="enrolment.reservation"
                class="infolink-light-alert pointer"
                tabindex="0"
                (click)="removeReservation()"
            >
                {{ 'sitnet_student_remove_reservation' | translate }}
            </button>
        </li>
        <!-- enrolment with examination event, allow event removal -->
        <li *ngIf="enrolment.examinationEventConfiguration" ngbDropdownItem>
            <button class="infolink-light-alert pointer" tabindex="0" (click)="removeReservation()">
                {{ 'sitnet_student_remove_reservation' | translate }}
            </button>
        </li>
        <!-- enrolment without reservation or examination event, allow unenrolling (if other conditions pass) -->
        <li
            *ngIf="
                !enrolment.reservation &&
                !enrolment.examinationEventConfiguration &&
                (enrolment.exam?.executionType?.type === 'PUBLIC' || enrolment.collaborativeExam)
            "
            ngbDropdownItem
        >
            <button tabindex="0" (click)="removeEnrolment()" class="infolink-light-alert pointer">
                {{ 'sitnet_student_remove_enrolment' | translate }}
            </button>
        </li>
        <!-- enrolment without reservation, allow making reservation -->
        <li
            *ngIf="
                (!enrolment.reservation && enrolment.exam?.implementation === 'AQUARIUM') || enrolment.collaborativeExam
            "
            ngbDropdownItem
        >
            <button (click)="makeReservation()" tabindex="0" class="infolink-light pointer">
                {{ 'sitnet_student_new_reservation' | translate }}
            </button>
        </li>
        <!-- enrolment without examination event, allow making reservation -->
        <li
            *ngIf="
                !enrolment.examinationEventConfiguration &&
                enrolment.exam?.implementation !== 'AQUARIUM' &&
                hasUpcomingAlternativeEvents()
            "
            ngbDropdownItem
        >
            <button
                [hidden]="enrolment.exam.executionType.type !== 'PUBLIC'"
                class="infolink-light pointer"
                (click)="makeReservation()"
                tabindex="0"
            >
                {{ 'sitnet_student_new_reservation' | translate }}
            </button>
        </li>
    </ul>
</div>
