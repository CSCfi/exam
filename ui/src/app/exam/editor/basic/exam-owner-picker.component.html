<!--
SPDX-FileCopyrightText: 2024 The members of the EXAM Consortium

SPDX-License-Identifier: EUPL-1.2
-->

<div class="row mt-3">
    <div class="col-md-3">
        {{ 'i18n_exam_owners' | translate }}
        <sup
            ngbPopover="{{ 'i18n_exam_owner_description' | translate }}"
            popoverTitle="{{ 'i18n_instructions' | translate }}"
            triggers="mouseenter:mouseleave"
            ><img src="/assets/images/icon_tooltip.svg" alt=""
        /></sup>
    </div>
    <div class="col-md-5">
        <div class="input-group">
            <input
                id="newOwner"
                type="text"
                class="form-control w-50"
                [(ngModel)]="newOwner.name"
                [ngbTypeahead]="listOwners$"
                [inputFormatter]="nameFormatter"
                [resultFormatter]="nameFormatter"
                (selectItem)="setExamOwner($event)"
            />
            <button (click)="addExamOwner()" class="input-group-text btn btn-success">
                {{ 'i18n_add' | translate }}
            </button>
        </div>
    </div>
</div>

<div class="row mt-3">
    <div class="col-md-5 offset-md-3">
        <div [hidden]="examOwners().length !== 1">
            {{ 'i18n_exam_owner_info' | translate }}
        </div>
        @for (user of examOwners(); track user) {
            <div class="d-flex align-items-center mt-1">
                <div class="w-50">
                    <small>{{ user.firstName }} {{ user.lastName }} ({{ user.email }})</small>
                </div>
                <!-- Remove button -->
                <button
                    class="btn btn-danger btn-sm"
                    (click)="removeOwner(user.id)"
                    [hidden]="examOwners().length === 1"
                    [attr.aria-label]="user.firstName + ' ' + user.lastName"
                >
                    {{ 'i18n_remove' | translate }}
                </button>
            </div>
        }
    </div>
</div>
