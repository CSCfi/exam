<div class="col-md-12">
    <table class="table table-striped table-condensed" [ngClass]="tableClass">
        <thead>
            <tr>
                <th>
                    <input
                        type="checkbox"
                        name="select_all"
                        [(ngModel)]="allSelected"
                        (change)="selectAll()"
                        placement="top"
                        trigger="mouseenter"
                        ngbPopover="{{ 'sitnet_check_uncheck_all' | translate }}"
                    />
                </th>
                <th>
                    <table-sort
                        by="id"
                        text="sitnet_question"
                        [predicate]="questionsPredicate"
                        [reverse]="reverse"
                        (click)="setPredicate('id')"
                        (onSort)="onSort($event)"
                    >
                    </table-sort>
                </th>
                <th>
                    <table-sort
                        by="modified"
                        text="sitnet_modified"
                        [predicate]="questionsPredicate"
                        [reverse]="reverse"
                        (click)="setPredicate('modified')"
                        (onSort)="onSort($event)"
                    >
                    </table-sort>
                </th>
                <th>
                    <table-sort
                        by="displayedMaxScore"
                        text="sitnet_max_score"
                        [predicate]="questionsPredicate"
                        [reverse]="reverse"
                        (click)="setPredicate('displayedMaxScore')"
                        (onSort)="onSort($event)"
                    >
                    </table-sort>
                </th>
                <th>
                    <table-sort
                        by="typeOrd"
                        text="sitnet_questio_type"
                        [predicate]="questionsPredicate"
                        [reverse]="reverse"
                        (click)="setPredicate('typeOrd')"
                        (onSort)="onSort($event)"
                    >
                    </table-sort>
                </th>
                <th>
                    <table-sort
                        by="attachment.fileName"
                        text="sitnet_question"
                        [predicate]="questionsPredicate"
                        [reverse]="reverse"
                        (click)="setPredicate('attachment.fileName')"
                        (onSort)="onSort($event)"
                    >
                    </table-sort>
                </th>
                <th>{{ 'sitnet_categories' | translate }}</th>
                <th>
                    <table-sort
                        *ngIf="user.isAdmin"
                        by="ownerAggregate"
                        text="sitnet_owner"
                        [predicate]="questionsPredicate"
                        [reverse]="reverse"
                        (click)="setPredicate('ownerAggregate')"
                        (onSort)="onSort($event)"
                    >
                    </table-sort>
                </th>
                <th>{{ 'sitnet_remove' | translate }}</th>
                <th>{{ 'sitnet_copy' | translate }}</th>
            </tr>
        </thead>
        <tbody>
            <tr
                *ngFor="
                    let question of questions
                        | orderBy: questionsPredicate:reverse:'case-insensitive'
                        | slice: currentPage * pageSize:currentPage * pageSize + pageSize
                "
            >
                <td class="question-table-checkbox">
                    <input
                        type="checkbox"
                        [(ngModel)]="question.selected"
                        (change)="questionSelected()"
                        class="questionToUpdate"
                        value="{{ question.id }}"
                    />
                </td>
                <td class="question-table-name">
                    <span *ngIf="question.question" [MathJax]="question.question | truncate: 360"> </span>
                    <span *ngIf="!question.question" class="text-danger">
                        {{ 'sitnet_no_name' | translate }}
                    </span>
                    <div>
                        <span>
                            <a *ngIf="!disableLinks" uiSref="question({id: {{ question.id }} })">{{ question.id }}</a>
                            <span *ngIf="disableLinks">#{{ question.id }}</span>
                            <i
                                *ngIf="question.questionOwners.length > 1"
                                class="fa fa-group text-primary"
                                ngbPopover="{{ 'sitnet_question_owners' | translate }}: {{ printOwners(question) }}"
                                placement="right"
                                trigger="mouseenter"
                            ></i>
                        </span>
                    </div>
                </td>
                <td>
                    <span *ngIf="question.modified" class="timestamp">
                        {{ question.modified | date: 'dd.MM.yyyy HH:mm' }}
                        <br />
                        <small>{{ question.modifier.firstName }} {{ question.modifier.lastName }}</small>
                    </span>
                </td>
                <td>{{ showDisplayedScoreOrTranslate(question.displayedMaxScore) }}</td>
                <td>
                    <span *ngIf="question.type === 'MultipleChoiceQuestion'">{{
                        'sitnet_question_mc' | translate
                    }}</span>
                    <span *ngIf="question.type === 'EssayQuestion'">{{ 'sitnet_essay' | translate }}</span>
                    <span *ngIf="question.type === 'WeightedMultipleChoiceQuestion'"
                        >{{ 'sitnet_question_weighted_mc' | translate }}
                    </span>
                    <span *ngIf="question.type === 'ClozeTestQuestion'"
                        >{{ 'sitnet_toolbar_cloze_test_question' | translate }}
                    </span>
                    <span *ngIf="question.type === 'ClaimChoiceQuestion'">
                        {{ 'sitnet_toolbar_claim_choice_question' | translate }}
                    </span>
                </td>
                <td class="question-table-name">
                    <a *ngIf="question.attachment" class="pointer" (click)="downloadQuestionAttachment(question)">
                        <i class="fa fa-paperclip fa-fw"></i>
                        {{ question.attachment.fileName }}
                    </a>
                </td>
                <td>{{ printTags(question) }}</td>
                <td *ngIf="user.isAdmin" class="question-table-name">
                    <span ng-repeat="owner in question.questionOwners">
                        <a href="mailto:{{ owner.email }}"> {{ printOwner(owner, true) }}{{ $last ? '' : ', ' }} </a>
                    </span>
                </td>
                <td class="padl20">
                    <a *ngIf="question.allowedToRemove" (click)="deleteQuestion(question)" class="pointer">
                        <i
                            class="fa fa-trash-o fa-fw"
                            placement="left"
                            trigger="mouseenter"
                            ngbPopover="{{ 'sitnet_exam_remove' | translate }}"
                        ></i>
                    </a>
                </td>
                <td class="padl20 padr10">
                    <a (click)="copyQuestion(question, false)">
                        <i
                            class="fa fa-clone fa-fw"
                            placement="left"
                            trigger="mouseenter"
                            ngbPopover="{{ 'sitnet_copy' | translate }}"
                        ></i>
                    </a>
                </td>
            </tr>
            <!--Fill if page not full-->
            <tr *ngFor="let r of [] | pageFill: questions.length:currentPage:pageSize">
                <td colspan="9">&nbsp;</td>
                <td *ngIf="user.isAdmin"></td>
            </tr>
            <tr *ngIf="questions.length == 0">
                <td colspan="9">{{ 'sitnet_exam_library_no_results' | translate }}</td>
            </tr>
        </tbody>
    </table>
</div>
<div class="col-md-12" *ngIf="questions.length > pageSize">
    <paginator
        [items]="questions"
        (onSelectPage)="pageSelected($event)"
        [pageSize]="pageSize"
        [currentPage]="currentPage"
    >
    </paginator>
</div>
