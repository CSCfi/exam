<div class="student-enrolment-wrapper review-view">
    <div class="review-points-exam">
        <strong>#{{ sectionQuestion.question.id }}</strong>
        <a
            *ngIf="sectionQuestion.question.attachment?.id || sectionQuestion.question.attachment?.externalId"
            class="pointer attachment-link pull-right"
            ngbPopover="{{ sectionQuestion.question.attachment.fileName }}"
            placement="left"
            triggers="mouseenter:mouseleave"
            (click)="downloadQuestionAttachment()"
        >
            <i class="bi-paperclip"></i>
        </a>
    </div>
    <!-- question points -->
    <div
        class="review-points-exam"
        *ngIf="
            sectionQuestion.evaluationType === 'Points' ||
            sectionQuestion.question.type === 'ClozeTestQuestion' ||
            sectionQuestion.question.type === 'MultipleChoiceQuestion'
        "
    >
        0 / {{ sectionQuestion.maxScore }} {{ 'sitnet_unit_points' | translate }}
    </div>
    <div class="review-points-exam" *ngIf="sectionQuestion.evaluationType === 'Selection'">
        {{ 'sitnet_evaluation_select' | translate }}
    </div>
    <div class="review-points-exam" *ngIf="sectionQuestion.question.type === 'WeightedMultipleChoiceQuestion'">
        0 / {{ calculateMaxPoints() }} {{ 'sitnet_unit_points' | translate }}
    </div>
    <div class="review-points-exam" *ngIf="sectionQuestion.question.type === 'ClaimChoiceQuestion'">
        {{ getMinimumOptionScore() }} / {{ getCorrectClaimChoiceOptionScore() }} {{ 'sitnet_unit_points' | translate }}
    </div>

    <!-- Question -->
    <div class="marl10 make-inline">
        <div class="review-question-title make-inline" [MathJax]="sectionQuestion.question.question"></div>
        <a
            (click)="sectionQuestion.expanded = !sectionQuestion.expanded"
            class="pointer-hand"
            *ngIf="sectionQuestion.answerInstructions || sectionQuestion.options.length > 0"
        >
            <img
                (click)="(!sectionQuestion.expanded)"
                src="/assets/assets/images/icon_list_show_right.svg"
                alt="exam"
                onerror="this.onerror=null;this.src='/assets/assets/images/icon_list_show_right.png'"
            />
            <img
                (click)="(sectionQuestion.expanded)"
                src="/assets/assets/images/icon_list_show_down.svg"
                alt="exam"
                onerror="this.onerror=null;this.src='/assets/assets/images/icon_list_show_down.png'"
            />
        </a>
    </div>
    <!-- Cog icon -->

    <div class="pull-right dropdown pointer-hand single-question-icon" ngbDropdown>
        <a href class="pull-right dropdown-toggle exam-settings-link" ngbDropdownToggle>
            <span class="exam-section-question-settings">{{ 'sitnet_settings' | translate }}</span>
            <img
                src="/assets/assets/images/icon_settings.png"
                alt="exam"
                onerror="this.onerror=null;this.src='/assets/assets/images/icon_settings.png'"
            />
        </a>
        <ul class="dropdown-menu" ngbDropdownMenu>
            <li>
                <a (click)="editQuestion()"> {{ 'sitnet_edit' | translate }}</a>
            </li>
            <li>
                <a (click)="removeQuestion()">{{ 'sitnet_remove' | translate }}</a>
            </li>
        </ul>
    </div>

    <div class="col-md-12" *ngIf="sectionQuestion.expanded">
        <img
            src="/assets/assets/images/icon_info.png"
            *ngIf="sectionQuestion.answerInstructions?.length > 0"
            alt="exam"
            onerror="this.onerror=null;this.src='/assets/assets/images/icon_info.png'"
        />
        <span *ngIf="sectionQuestion.answerInstructions?.length > 0" class="padl10">
            {{ sectionQuestion.answerInstructions }}</span
        >
        <ul class="exam-section-question-options">
            <li
                [hidden]="sectionQuestion.question.type !== 'MultipleChoiceQuestion'"
                *ngFor="let option of sectionQuestion.options"
            >
                <img
                    src="/assets/assets/images/icon_correct_answer.png"
                    *ngIf="option.option.correctOption"
                    alt="exam"
                    onerror="this.onerror=null;this.src='/assets/assets/images/icon_correct_answer.png'"
                />
                <img
                    src="/assets/assets/images/icon_wrong_answer.png"
                    *ngIf="!option.option.correctOption"
                    alt="exam"
                    onerror="this.onerror=null;this.src='/assets/assets/images/icon_wrong_answer.png'"
                />
                <span class="exam-question-option-text">{{ option.option.option }}</span>
            </li>
            <li
                [hidden]="sectionQuestion.question.type !== 'WeightedMultipleChoiceQuestion'"
                *ngFor="let option of sectionQuestion.options"
            >
                <img
                    src="/assets/assets/images/icon_correct_answer_checkbox.png"
                    *ngIf="option.score >= 0"
                    alt="exam"
                    onerror="this.onerror=null;this.src='/assets/assets/images/icon_correct_answer_checkbox.png'"
                />
                <img
                    src="/assets/assets/images/icon_wrong_answer_checkbox.png"
                    *ngIf="option.score < 0"
                    alt="exam"
                    onerror="this.onerror=null;this.src='/assets/assets/images/icon_wrong_answer_checkbox.png'"
                />
                <span class="exam-question-option-text">{{ option.option.option }}</span>
                <span class="exam-question-option-text pull-right"
                    >{{ option.score }} {{ 'sitnet_unit_points' | translate }}</span
                >
            </li>
            <li
                [hidden]="sectionQuestion.question.type !== 'ClaimChoiceQuestion'"
                *ngFor="let option of sectionQuestion.options | orderBy: 'option.id'"
            >
                <img
                    src="/assets/assets/images/icon_correct_answer_radio.png"
                    *ngIf="determineClaimOptionType(option) == 'CorrectOption'"
                    alt="exam"
                    onerror="this.onerror=null;this.src='/assets/assets/images/icon_wrong_answer.png'"
                />
                <img
                    src="/assets/assets/images/icon_wrong_answer_radio.png"
                    *ngIf="determineClaimOptionType(option) == 'IncorrectOption'"
                    alt="exam"
                    onerror="this.onerror=null;this.src='/assets/assets/images/icon_wrong_answer.png'"
                />
                <img
                    src="/assets/assets/images/icon_wrong_answer.png"
                    *ngIf="determineClaimOptionType(option) == 'SkipOption'"
                    alt="exam"
                    onerror="this.onerror=null;this.src='/assets/assets/images/icon_wrong_answer.png'"
                />
                <span class="exam-question-option-text">{{ option.option.option }}</span>
                <span class="exam-question-option-text pull-right"
                    >{{ option.score }} {{ 'sitnet_unit_points' | translate }}</span
                >
            </li>
        </ul>
    </div>
</div>
