before_script:
  - psql -c "CREATE USER sitnet WITH PASSWORD 'sitnetsitnet';" -U postgres
  - psql -c 'CREATE DATABASE sitnet_test WITH OWNER 'sitnet';' -U postgres
  - sudo mkdir -p /var/log/exam
  - sudo touch /var/log/exam/application.log
  - sudo chmod a+w /var/log/exam/application.log
  - nvm install 8.9.1
  - nvm use 8.9.1

script:
  - npm install
  - sbt package
  - sbt test

services:
  - postgresql

addons:
  postgresql: "9.6"

language:
  - scala

jdk:
  - oraclejdk8

before_cache:
  # Tricks to avoid unnecessary cache updates
  - find $HOME/.sbt -name "*.lock" | xargs rm
  - find $HOME/.ivy2 -name "ivydata-*.properties" | xargs rm

cache:
  directories:
    - $HOME/.ivy2/cache
    - $HOME/.sbt
    - $TRAVIS_BUILD_DIR/app/frontend/node_modules

