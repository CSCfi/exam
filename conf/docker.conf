# SPDX-FileCopyrightText: 2024 The members of the EXAM Consortium
#
# SPDX-License-Identifier: EUPL-1.2

# Configuration for Docker containerized deployment
include "application.conf"

# Application secret - should be overridden in production with secure random value
play.http.secret.key = "changeme-docker-secret-key-please-override-in-production"
play.http.secret.key = ${?APPLICATION_SECRET}

# Use mock mailer by default
play.mailer.mock = true

# Database configuration - connect to postgres container
db.default.url = "jdbc:postgresql://postgres:5432/exam"
db.default.username = "exam"
db.default.username = ${?DB_USER}
db.default.password = "exam"
db.default.password = ${?DB_PASSWORD}

# Use DEBUG login mode (no SSO)
exam.login = "DEBUG"

# Admin role mapping
exam.roles.admin = ["staff"]

# Application hostname
exam.application.hostname = "http://localhost"
exam.application.hostname = ${?APP_HOSTNAME}

# Attachments path
exam.attachments.path = "/app/data/attachments"

# Disable course integration for Docker
exam.integration.courseUnitInfo.active = false

# Disable IOP integration for Docker
exam.integration.iop.visit.active = false
exam.integration.iop.collaboration.active = false

# Security settings for Docker environment
# CSRF token settings - Angular needs to read the cookie
play.filters.csrf.cookie.secure = false
play.filters.csrf.cookie.httpOnly = false
play.filters.csrf.token.sign = false
# Use cookie provider for CSRF tokens
play.filters.csrf.tokenProvider = "play.filters.csrf.CookieCSRFTokenProvider"
play.filters.headers.contentSecurityPolicy = null

# Evolutions (database migrations)
play.evolutions.autoApply = true
play.evolutions.autoApplyDowns = false

# SMTP configuration (override with environment variables)
play.mailer.host = ${?SMTP_HOST}
play.mailer.port = ${?SMTP_PORT}
play.mailer.ssl = ${?SMTP_SSL}
play.mailer.tls = ${?SMTP_TLS}
play.mailer.user = ${?SMTP_USER}
play.mailer.password = ${?SMTP_PASSWORD}
