<div id="sitnet-header" class="header">
    <div class="col-md-12 header-wrapper">
        <span class="header-text">{{'sitnet_examination_location' | translate}}</span>
    </div>
</div>
<div id="room" class="">
    <div class="nospace room-header col-md-12">
        <div class="col-md-9 nospace" ng-init="showName = true">
            <div ng-show="showName">
                    <span class="pull-left room-name" ng-click="showName = !showName">
                        {{roomInstance.name}} <i class="fa fa-pencil"></i>
                    </span>
            </div>
            <div ng-show="!showName">
                <form class="form-inline" role="form">
                    <div class="form-group">
                        <input type="text" class="form-control input-lg" ng-model="roomInstance.name" autofocus>
                    </div>
                    <button class="btn-primary" ng-click="showName = !showName; updateRoom(roomInstance)">
                        <i class="fa fa-check"></i>
                    </button>
                </form>
            </div>
        </div>
        <div class="col-md-3 nospace">
            <a ng-click="removeRoom(roomInstance)" class="header-icon pull-right fa-stack fa-lg">
                <i class="fa sitnet-text-light fa-stop fa-stack-2x"></i>
                <i class="fa fa-minus fa-stack-1x"></i>
            </a>
        </div>
    </div>
        <!-- Room Code & Building name -->
        <div class="row">
            <div class="col-md-6">
                <div class="sitnet-info-text">{{'sitnet_room_code' | translate}}</div>
                <div class="input-group">
                    <input type="text" class="form-control ng-pristine ng-valid" ng-model="roomInstance.roomCode"
                           ui-change="updateRoom(roomInstance)">
                    <span class="input-group-addon"
                          ng-click="toaster.info('Tenttitilan yksilöivä tunniste. Esim: 811380A');">
                        <i class="fa fa-question-circle fa-fw"></i>
                    </span>
                </div>
            </div>

            <div class="col-md-6">
                <div class="sitnet-info-text">{{'sitnet_room_building_name' | translate}}</div>
                <div class="input-group">
                    <input type="text" class="form-control ng-pristine ng-valid" ng-model="roomInstance.buildingName"
                           ui-change="updateRoom(roomInstance)">
                        <span class="input-group-addon"
                              ng-click="toaster.info('Rakennuksen nimi jossa kone sijaitsee');">
                            <i class="fa fa-question-circle fa-fw"></i>
                        </span>
                </div>
            </div>
        </div>

        <!-- Campus & Organization name -->
        <div class="row">
            <div class="col-md-6">
                <div class="sitnet-info-text">{{'sitnet_room_campus' | translate}}</div>
                <div class="input-group">
                    <input type="text" class="form-control ng-pristine ng-valid" ng-model="roomInstance.campus"
                           ui-change="updateRoom(roomInstance)">
                    <span class="input-group-addon"
                          ng-click="toaster.info('Kampus, jossa tenttitila sijaitsee');">
                        <i class="fa fa-question-circle fa-fw"></i>
                    </span>
                </div>
            </div>

            <div class="col-md-6">
                <div class="sitnet-info-text">{{'sitnet_room_organization' | translate}}</div>
                <div class="input-group">
                    <input type="text" class="form-control ng-pristine ng-valid" ng-model="roomInstance.organization"
                           ui-change="updateRoom(roomInstance)">
                        <span class="input-group-addon"
                              ng-click="toaster.info('Organisaatio, joka tenttitilan omistaa');">
                            <i class="fa fa-question-circle fa-fw"></i>
                        </span>
                </div>
            </div>
        </div>

        <!-- Working hours & Exam transition time -->
        <div class="row">
            <div class="col-md-6" ng-controller="TimepickerController">
                <div class="sitnet-info-text">{{'sitnet_room_default_working_hours' | translate}}</div>

                <div class="col-md-3">
                    <h4>{{'sitnet_room_default_working_hours_start' | translate}}</h4>
                    <div ng-model="startTime" ng-change="startTimeChanged()" style="display:inline-block;">
                        <timepicker hour-step="hourstep" minute-step="minutestep" show-meridian="ismeridian"></timepicker>
                    </div>
                </div>

                <div class="col-md-3">
                    <h4>{{'sitnet_room_default_working_hours_end' | translate}}</h4>
                    <div ng-model="endTime" ng-change="endTimeChanged()" style="display:inline-block;">
                        <timepicker hour-step="hourstep" minute-step="minutestep" show-meridian="ismeridian"></timepicker>
                    </div>
                </div>

                <div>
                    <button ng-click="saveWorkingHours(roomInstance.calendarEvent)" class="btn btn-primary" style="margin-top: 5.4em">{{'sitnet_save' | translate}}</button>
                </div>

                <div>
                    <button ng-click="showExceptionTimes = !showExceptionTimes" class="btn btn-primary">{{'sitnet_add_exception_time' | translate}}</button>
                </div>

                    <!-- Creating a new exception calendar event -->
                    <div ng-show="showExceptionTimes" ng-controller="DatepickerCtrl">

                        <div class="col-md-12">
                            <h4>Poikkeusajan alkupäivä</h4>

                            <p class="input-group">
                                <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="dateService.exceptionStartDate"
                                       is-open="startDateOpened" min="minDate"
                                       max="'2215-06-22'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)"
                                       ng-required="true" close-text="Close">
                                <span class="input-group-btn">
                                    <button class="btn btn-default" ng-click="openStartDate($event)">
                                        <i class="fa fa-calendar"></i>
                                    </button>
                            </span>
                            </p>
                        </div>

                        <div class="col-md-12">
                            <h4>Poikkeusajan loppupäivä</h4>

                            <p class="input-group">
                                <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="dateService.exceptionEndDate"
                                       is-open="endDateOpened" min="dateService.exceptionStartDate"
                                       max="'2215-06-22'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)"
                                       ng-required="true" close-text="Close">
                                <span class="input-group-btn">
                                    <button class="btn btn-default" ng-click="openEndDate($event)">
                                        <i class="fa fa-calendar"></i>
                                    </button>
                            </span>
                            </p>
                        </div>

                        <div ng-controller="TimepickerController">
                            <div class="col-md-3">
                                <h4>Poikkeusajan alkuaika</h4>
                                <div ng-model="exceptionStartTime" ng-change="exceptionStartTimeChanged()" style="display:inline-block;">
                                    <timepicker hour-step="hourstep" minute-step="minutestep" show-meridian="ismeridian"></timepicker>
                                </div>
                            </div>

                            <div class="col-md-3">
                                <h4>Poikkeusajan loppupäivä</h4>
                                <div ng-model="exceptionEndTime" ng-change="exceptionEndTimeChanged()" style="display:inline-block;">
                                    <timepicker hour-step="hourstep" minute-step="minutestep" show-meridian="ismeridian"></timepicker>
                                </div>
                            </div>
                        </div>

                        <div>
                            <button ng-click="createNewException(roomInstance)" class="btn btn-primary">Tallenna poikkeus</button>
                        </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="sitnet-info-text">{{'sitnet_room_transition_time' | translate}}</div>
                <div class="input-group">
                    <input type="text" class="form-control ng-pristine ng-valid" ng-model="roomInstance.transitionTime"
                           ui-change="updateRoom(roomInstance)" value="5">
                        <span class="input-group-addon"
                              ng-click="toaster.info('Siirtymäaika tenttien suoritusten välillä, oletuksena 5min');">
                            <i class="fa fa-question-circle fa-fw"></i>
                        </span>
                </div>
            </div>
        </div>

        <!-- Accessibility information -->
        <div class="row">
            <div class="col-md-12">
                <div class="sitnet-info-text">{{'sitnet_room_accessibility_info' | translate}}</div>
                <div class="input-group">
                    <textarea class="form-control ng-pristine ng-valid" ng-model="roomInstance.accessibilityInfo" ui-change="updateRoom(roomInstance)">
                    </textarea>
                        <span class="input-group-addon"
                              ng-click="toaster.info('Onko tilassa erityisiä esteettömyyteen vaikuttavia tekijöitä?');">
                            <i class="fa fa-question-circle fa-fw"></i>
                        </span>
                </div>
                <div class="checkbox">
                    <label>
                        <input type="checkbox" ng-model="roomInstance.accessible" ng-change="updateRoom(roomInstance)"> {{'sitnet_room_accessible' | translate}}
                    </label>
                </div>
            </div>
        </div>

        <!-- Guidance & Contact person information -->
        <div class="row">
            <div class="col-md-6">
                <div class="sitnet-info-text">{{'sitnet_room_guidance' | translate}}</div>
                <div class="input-group">
                    <!--<input type="text" class="form-control ng-pristine ng-valid" ng-model="roomInstance.roomInstruction"-->
                           <!--ui-change="updateRoom(roomInstance)">-->
                    <textarea class="form-control ng-pristine ng-valid" ng-model="roomInstance.roomInstruction" ui-change="updateRoom(roomInstance)">
                    </textarea>
                    <span class="input-group-addon"
                          ng-click="toaster.info('Tenttitilan käyttämiseen liittyvä ohjeistus');">
                        <i class="fa fa-question-circle fa-fw"></i>
                    </span>
                </div>
            </div>

            <div class="col-md-6">
                <div class="sitnet-info-text">{{'sitnet_room_contact_person' | translate}}</div>
                <div class="input-group">
                    <input type="text" class="form-control ng-pristine ng-valid" ng-model="roomInstance.contactPerson"
                           ui-change="updateRoom(roomInstance)">
                        <span class="input-group-addon"
                              ng-click="toaster.info('Ota yhteyttä tähän henkilöön lisätietoa kaivatessasi');">
                            <i class="fa fa-question-circle fa-fw"></i>
                        </span>
                </div>
            </div>
        </div>

        <!-- Video recordings URL -->
        <div class="row">
            <div class="col-md-6">
                <div class="sitnet-info-text">{{'sitnet_room_videorecordings_url' | translate}}</div>
                <div class="input-group">
                    <input type="text" class="form-control ng-pristine ng-valid" ng-model="roomInstance.videoRecordingsURL"
                           ui-change="updateRoom(roomInstance)">
                        <span class="input-group-addon"
                              ng-click="toaster.info('Tästä osoitteesta löytyy tenttihuoneen videokameralla kuvatut otokset');">
                            <i class="fa fa-question-circle fa-fw"></i>
                        </span>
                </div>
            </div>
        </div>

        <!-- Address -->
        <h3>{{'sitnet_exam_room_postal_address' | translate }}</h3>
        <div id="address" class="machines-section" ng-include="addressTemplate">
        </div>

        <!-- Service status -->
        <div class="row">
            <div class="col-md-12">
                <div class="checkbox">
                    <label>
                        <input type="checkbox" ng-model="roomInstance.outOfService" ng-change="updateRoom(roomInstance)"> {{'sitnet_out_of_service' | translate}}
                    </label>
                </div>
                <div class="sitnet-info-text">{{'sitnet_reason' | translate}}</div>
                <div class="input-group">
                    <textarea class="form-control ng-pristine ng-valid" ng-model="roomInstance.statusComment" ui-change="updateRoom(roomInstance)">
                    </textarea>
                        <span class="input-group-addon"
                              ng-click="toaster.info('Onko tilassa erityisiä esteettömyyteen vaikuttavia tekijöitä?');">
                            <i class="fa fa-question-circle fa-fw"></i>
                        </span>
                </div>
            </div>
        </div>

        <!-- Exam room machines
        <div>
            <h3>{{'sitnet_exam_room_machines' | translate }}
                <span>
                    <button ng-click="addNewMachine(roomInstance)" class="btn btn-primary" style="float: right">{{'sitnet_create_new' | translate}}</button>
                </span>
            </h3>
        </div>
        <div id="reservation" class="machines-section" ng-include="machineTemplate" ng-repeat="machine in roomInstance.examMachines"
             style="padding-left: 1em; margin-bottom: 2em">
        </div>
        -->
        <!-- Button row -->
        <div class="row" style="padding:2em 0;">
            <div class="col-md-6 col-md-offset-5">
                <button ng-click="saveRoom(roomInstance)" class="btn btn-primary">{{'sitnet_save' | translate}}</button>
            </div>
        </div>
</div>