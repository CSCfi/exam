<div id="sitnet-header" class="header">
    <div class="col-md-11 header-wrapper">
        <span class="header-text">{{'sitnet_exams_to_be_reviewed' | translate}}</span>
    </div>
    <div class="col-md-1 header-wrapper" ng-controller="ExamController">

    </div>
    <div class="col-md-1 ">
        <!--<span class="header-clock pull-right">
            <span class="col-md-12  weekday">24. lauantai</span>
            <span class="col-md-12  date">Toukokuuta 2014</span>
            <span class="col-md-12  clock"></span>
        </span>-->
    </div>
</div>
<div id="dashboard" class="container-fluid">

    <div class="col-md-12  exams-table-title-area">
        <!--<span class="exams-list-title-text pull-left">{{'sitnet_exams_to_be_reviewed' | translate}} </span>-->
        <!--<span class="exams-list-title-text ">{{examReviews[1].course.code}} {{examReviews[1].name}}-->
            <!--{{[1].exam.examActiveStartDate | filter dd.MM.vvvf}}--></span>
        <span class="col-md-12 exams-list-title-text pull-left">{{getExamInfo()}}</span>
    </div>
    <div class="col-md-12 bottom-padding-2">
        <!-- EXIT PREVIEW -->
        <a href="#/home" class="col-md-12"><i class="fa fa-sign-out"><span class="italic">{{'sitnet_dashboard' | translate}}</span></i></a>
    </div>
    <div ng-show="examReviews.length > 0">
        <!--Odottaa tarkastusta-->
        <div class="col-md-12 row">
            <div class="col-md-5 exams-table-title-area">
                <span ng-click="toggleReviewExams = !toggleReviewExams" class="exams-list-title-text pull-left pointer">{{ 'sitnet_exam_in_review' | translate }}</span>
            </div>

            <div class="col-md-7">
                <!-- href="#/rooms/{{room.id}}" -->
                <a ng-click="toggleReviewExams = !toggleReviewExams" class="header-icon pull-right fa-stack fa-lg">
                    <i class="fa sitnet-white fa-stop fa-stack-2x"></i>
                    <i ng-show="!toggleReviewExams" class="fa fa-chevron-left fa-stack-1x"></i>
                    <i ng-show="toggleReviewExams" class="fa fa-chevron-down fa-stack-1x"></i>
                </a>
            </div>
        </div>
        <div class="row base" ng-show="toggleReviewExams">
            <div class="exams-list col-md-12" ng-if="( examReviews | filter: byState('REVIEW') ).length > 0 || ( examReviews | filter: byState('STUDENT_STARTED') ).length > 0 || ( examReviews | filter: byState('ABORTED') ).length > 0">
                <div class="exams-table-borders">
                    <table class="table table-bordered exams-table">
                        <thead>
                            <tr>
                                <th><i class="fa fa-flag"></i></th>
                                <th><i class="fa fa-exclamation-triangle"></i></th>
                                <th>{{'sitnet_student' | translate }}</th>
                                <th>{{'sitnet_review_deadline' | translate }}</th>
                                <th>{{'sitnet_exam_duration' | translate}}</th>
                                <th>{{'sitnet_inspection_status' | translate}}</th>
                                <th>{{'sitnet_exam_state' | translate}}</th>
                            </tr>
                        </thead>

                        <tbody>
                            <tr ng-repeat="examReview in examReviews | filter: byState('REVIEW') | orderBy:deadline ">
                                <td class="table-column-flag"><!--<i class="sitnet-dark-blue fa fa-flag"></i>--></td>
                                <td class="table-column-exclamation"><!--<i class="sitnet-red fa fa-flash"></i>--></td>
                                <td class="table-column-examname"><a href="#/exams/review/{{examReview.exam.id}}">{{examReview.user.firstName}} {{examReview.user.lastName}}</a></td>
                                <td class="table-column-open-until">{{examReview.deadline  | date:'dd.MM.yyyy'}}</td>
                                <td class="table-column-open-until">{{examReview.duration}}</td>
                                <td class="table-column-teachers">
                                    <div class="col-md-12" ng-repeat="inspection in getLocalInspection(examReview.exam.id)">
                                        <span class="sitnet-text-ready" ng-show="isLocalReady(inspection.exam.id, inspection.user.id) === true">{{inspection.user.firstName}} {{inspection.user.lastName}}</span>
                                        <span class="sitnet-text-alarm" ng-show="isLocalReady(inspection.exam.id, inspection.user.id) === false">{{inspection.user.firstName}} {{inspection.user.lastName}}</span>
                                    </div>
                                </td>
                                <td class="table-column-open-until">{{examReview.exam.state}}</td>
                            </tr>
                            <tr ng-repeat="examReview in examReviews | filter: byState('ABORTED')">
                                <td class="table-column-flag"><!--<i class="sitnet-dark-blue fa fa-flag"></i>--></td>
                                <td class="table-column-exclamation"><!--<i class="sitnet-red fa fa-flash"></i>--></td>
                                <td class="table-column-examname"><a href="#/exams/review/{{examReview.exam.id}}">{{examReview.user.firstName}} {{examReview.user.lastName}}</a></td>
                                <td class="table-column-open-until">{{examReview.deadline  | date:'dd.MM.yyyy'}}</td>
                                <td class="table-column-open-until">{{examReview.duration}}</td>
                                <td class="table-column-teachers">
                                    <div class="col-md-12" ng-repeat="inspection in getLocalInspection(examReview.exam.id)">
                                        <span class="sitnet-text-ready" ng-show="isLocalReady(inspection.exam.id, inspection.user.id) === true">{{inspection.user.firstName}} {{inspection.user.lastName}}</span>
                                        <span class="sitnet-text-alarm" ng-show="isLocalReady(inspection.exam.id, inspection.user.id) === false">{{inspection.user.firstName}} {{inspection.user.lastName}}</span>
                                    </div>
                                </td>
                                <td class="table-column-open-until">{{examReview.exam.state}}</td>
                            </tr>
                            <tr ng-repeat="examReview in examReviews | filter: byState('STUDENT_STARTED')">
                                <td class="table-column-flag"><!--<i class="sitnet-dark-blue fa fa-flag"></i>--></td>
                                <td class="table-column-exclamation"><!--<i class="sitnet-red fa fa-flash"></i>--></td>
                                <td class="table-column-examname"><a href="#/exams/review/{{examReview.exam.id}}">{{examReview.user.firstName}} {{examReview.user.lastName}}</a></td>
                                <td class="table-column-open-until">{{examReview.deadline  | date:'dd.MM.yyyy'}}</td>
                                <td class="table-column-open-until">{{examReview.duration}}</td>
                                <td class="table-column-teachers">
                                    <div class="col-md-12" ng-repeat="inspection in getLocalInspection(examReview.exam.id)">
                                        <span class="sitnet-text-ready" ng-show="isLocalReady(inspection.exam.id, inspection.user.id) === true">{{inspection.user.firstName}} {{inspection.user.lastName}}</span>
                                        <span class="sitnet-text-alarm" ng-show="isLocalReady(inspection.exam.id, inspection.user.id) === false">{{inspection.user.firstName}} {{inspection.user.lastName}}</span>
                                    </div>
                                </td>
                                <td class="table-column-open-until">{{examReview.exam.state}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    <!--Tarkastettu-->
        <div class="col-md-12 row">
            <div class="col-md-5 exams-table-title-area">
                <span ng-click="toggleGradedExams = !toggleGradedExams" class="exams-list-title-text pull-left pointer">{{ 'sitnet_exam_reviewed' | translate }}</span>
            </div>

            <div class="col-md-7">
                <!-- href="#/rooms/{{room.id}}" -->
                <a ng-click="toggleGradedExams = !toggleGradedExams" class="header-icon pull-right fa-stack fa-lg">
                    <i class="fa sitnet-white fa-stop fa-stack-2x"></i>
                    <i ng-show="!toggleGradedExams" class="fa fa-chevron-left fa-stack-1x"></i>
                    <i ng-show="toggleGradedExams" class="fa fa-chevron-down fa-stack-1x"></i>
                </a>
            </div>
        </div>
        <div class="row base" ng-show="toggleGradedExams">
            <div class="exams-list col-md-12" ng-if="( examReviews | filter: byState('GRADED') ).length > 0">
                <div class="exams-table-borders">
                    <table class="table table-bordered exams-table">
                        <thead>
                        <tr>
                            <th><i class="fa fa-flag"></i></th>
                            <th><i class="fa fa-exclamation-triangle"></i></th>
                            <th>{{ 'sitnet_examcode' | translate }}</th>
                            <th>{{ 'sitnet_exam_name' | translate }}</th>
                            <th>{{ 'sitnet_student' | translate }}</th>
                            <th>{{ 'sitnet_grade' | translate }}</th>
                            <th>{{'sitnet_inspection_status' | translate}}</th>
                            <th>{{ 'sitnet_graded' | translate }}</th>
                        </tr>
                        </thead>

                        <tbody>
                        <tr ng-repeat="examReview in examReviews | filter: byState('GRADED')">
                            <td class="table-column-flag"><!--<i class="sitnet-dark-blue fa fa-flag"></i>--></td>
                            <td class="table-column-exclamation"><!--<i class="sitnet-red fa fa-flash"></i>--></td>
                            <td class="table-column-examcode">{{examReview.exam.course.code}}</td>
                            <td class="table-column-examname"><a href="#/exams/review/{{examReview.exam.id}}">{{examReview.exam.name}}</a></td>
                            <td class="table-column-examname"><a href="mailto:{{examReview.user.email}}">{{examReview.user.firstName}} {{examReview.user.lastName}}</a></td>
                            <td class="table-column-open-until">{{examReview.exam.grade}}</td>
                            <td class="table-column-teachers">
                                <div class="pull-left horizontal-padding-05" ng-repeat="inspection in getLocalInspection(examReview.exam.id)">
                                    <span class="sitnet-text-ready" ng-show="isLocalReady(inspection.exam.id, inspection.user.id) === true">{{inspection.user.firstName}} {{inspection.user.lastName}}</span>
                                    <span class="sitnet-text-alarm" ng-show="isLocalReady(inspection.exam.id, inspection.user.id) === false">{{inspection.user.firstName}} {{inspection.user.lastName}}</span>
                                </div>
                            </td>
                            <td class="table-column-open-until">{{examReview.exam.gradedTime | date:'dd.MM.yyyy'}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <!--Kirjattu-->
        <div class="col-md-12 row">
            <div class="col-md-5 exams-table-title-area">
                <span ng-click="toggleLoggedExams = !toggleLoggedExams" class="exams-list-title-text pull-left pointer">{{ 'sitnet_exam_graded_logged' | translate }}</span>
            </div>

            <div class="col-md-7">
                <!-- href="#/rooms/{{room.id}}" -->
                <a ng-click="toggleLoggedExams = !toggleLoggedExams" class="header-icon pull-right fa-stack fa-lg">
                    <i class="fa sitnet-white fa-stop fa-stack-2x"></i>
                    <i ng-show="!toggleLoggedExams" class="fa fa-chevron-left fa-stack-1x"></i>
                    <i ng-show="toggleLoggedExams" class="fa fa-chevron-down fa-stack-1x"></i>
                </a>
            </div>
        </div>
        <div class="row base" ng-show="toggleLoggedExams">
            <div class="exams-list col-md-12" ng-if="( examReviews | filter: byState('GRADED_LOGGED') ).length > 0">
                <div class="exams-table-borders">
                    <table class="table table-bordered exams-table">
                        <thead>
                        <tr>
                            <th><i class="fa fa-flag"></i></th>
                            <th><i class="fa fa-exclamation-triangle"></i></th>
                            <th>{{ 'sitnet_examcode' | translate }}</th>
                            <th>{{ 'sitnet_exam_name' | translate }}</th>
                            <th>{{ 'sitnet_student' | translate }}</th>
                            <th>{{ 'sitnet_grade' | translate }}</th>
                            <th>{{ 'sitnet_graded' | translate }}</th>
                        </tr>
                        </thead>

                        <tbody>
                        <tr ng-repeat="examReview in examReviews | filter: byState('GRADED_LOGGED')">
                            <td class="table-column-flag"><!--<i class="sitnet-dark-blue fa fa-flag"></i>--></td>
                            <td class="table-column-exclamation"><!--<i class="sitnet-red fa fa-flash"></i>--></td>
                            <td class="table-column-examcode">{{examReview.exam.course.code}}</td>
                            <td class="table-column-examname">
                                <span ng-show="isLongerThanSixMonths(examReview.exam.gradedTime)">{{examReview.exam.name}}</span>
                                <a ng-show="!isLongerThanSixMonths(examReview.exam.gradedTime)" href="#/exams/review/{{examReview.exam.id}}">{{examReview.exam.name}}</a>
                            </td>
                            <td class="table-column-examname">{{examReview.user.firstName}} {{examReview.user.lastName}}</td>
                            <td class="table-column-open-until">{{examReview.exam.grade}}</td>
                            <td class="table-column-open-until">{{examReview.exam.gradedTime | date:'dd.MM.yyyy'}}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>