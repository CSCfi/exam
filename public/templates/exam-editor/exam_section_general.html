<div class="row exam-general-information-header">
    <div class="col-md-1">
        <a class="pointer pull-left fa-stack fa-lg" popover-placement="left" popover-popup-delay="1000"
           popover-trigger="mouseenter" popover="{{ 'sitnet_show' | translate }} / {{ 'sitnet_hide' | translate }}"
           ng-click="newExam.expanded = !newExam.expanded">
            <i ng-class="newExam.expanded ? 'fa fa-chevron-down fa-stack-1x' : 'fa fa-chevron-right fa-stack-1x'"></i>
        </a>
    </div>
    <div class="col-md-11 exams-generic-info-title">{{'sitnet_exam_basic_information' |
        translate}}</div>
</div>

<!-- General info section container -->
<div ng-show="newExam.expanded" ng-controller="DatepickerCtrl">

    <!-- Start & End time datepickers -->
    <div class="row">
        <div class="col-md-6">
            <h4>{{'sitnet_start_time' | translate}}</h4>
            <p class="input-group">
                <input type="text" class="form-control" datepicker-popup="{{format}}"
                       date-fix="{{format}}" ng-model="dateService.startDate"
                       is-open="startDateOpened" min="minDate"
                       datepicker-options="dateOptions"
                       close-text="{{'sitnet_close' | translate}}"
                       current-text="{{'sitnet_today' | translate}}" toggle-weeks-text="{{'sitnet_weeks' | translate}}" clear-text="{{'sitnet_clear' | translate}}" ng-required="true" ui-change="updateExam()">
                       
                <span class="input-group-btn">
                    <button class="btn btn-default" ng-click="openStartDate($event)">
                        <i class="fa fa-calendar"></i>
                    </button>
                </span>
            </p>
        </div>

        <div class="col-md-6">
            <h4>{{'sitnet_end_time' | translate}}</h4>
            <p class="input-group">
                <input type="text" class="form-control" datepicker-popup="{{format}}"
                       date-fix="{{format}}" ng-model="dateService.endDate"
                       is-open="endDateOpened" min="dateService.startDate"
                       datepicker-options="dateOptions" close-text="{{'sitnet_close' | translate}}" current-text="{{'sitnet_today' | translate}}" toggle-weeks-text="{{'sitnet_weeks' | translate}}" clear-text="{{'sitnet_clear' | translate}}"  ng-required="true">
                <span class="input-group-btn">
                    <button class="btn btn-default" ng-click="openEndDate($event)">
                        <i class="fa fa-calendar"></i>
                    </button>
                </span>
            </p>
        </div>
    </div>

    <!-- Summary of start and end times -->
    <div class="row">
        <div class="col-md-8 col-md-offset-2">
            <div>{{'sitnet_active_period' | translate}}:
                <em>{{dateService.startDate | date:'dd.MM.yyyy' }} - {{dateService.endDate | date:'dd.MM.yyyy' }}</em>
            </div>
        </div>
    </div>

    <div class="row" ng-controller="CourseTypeaheadCtrl">

        <div class="col-md-6">
            <div class="sitnet-info-text">{{'sitnet_course_name' | translate}}:</div>
            <div class="input-group">
                <input type="text" class="form-control ng-pristine ng-valid"
                       ng-model="newExam.course.name" ui-change="updateExam()"
                       placeholder="Opintojakson nimi"
                       typeahead-on-select="onCourseSelect($item, $model, $label, newExam)"
                       typeahead="c as c.name for c in getCourses('name', $viewValue)"
                       typeahead-min-length="2"
                       typeahead-loading="loadingCoursesByName">
                       <span class="input-group-addon"
                             ng-click="toaster.info('Opintojakson nimi');">
                            <i class="fa fa-question-circle fa-fw"></i>
                            <i ng-show="loadingCoursesByName" class="fa fa-refresh"></i>
                       </span>

            </div>
        </div>

        <div class="col-md-6">
            <div class="sitnet-info-text">{{'sitnet_course_code' | translate}}:</div>
            <div class="input-group">
                <input type="text" class="form-control ng-pristine ng-valid"
                       ng-model="newExam.course.code"
                       placeholder="{{'sitnet_course_code' | translate}}"
                       typeahead-on-select="onCourseSelect($item, $model, $label, newExam)"
                       typeahead="c as c.code for c in getCourses('code', $viewValue)"
                       typeahead-loading="loadingCoursesByCode">
                       <span class="input-group-addon"
                                          ng-click="toaster.info('Opintojakson yksilöivä tunniste. Esim: 811380A');">
                            <i class="fa fa-question-circle fa-fw"></i>
                            <i ng-show="loadingCoursesByCode" class="fa fa-refresh"></i>
                       </span>
            </div>
        </div>
    </div>

    <!-- Course scope and organization name input elements -->
    <div class="row">
        <div class="col-md-6">
            <div class="sitnet-info-text">{{'sitnet_course_scope' | translate}}:</div>
            <div class="input-group">
                <!-- placeholder="opintopistettä" -->
                <input type="text" class="form-control ng-pristine ng-valid" ng-model="newExam.course.credits"
                       ui-change="updateExam()">
                    <span class="input-group-addon" title="Ohjeet organisaation lisäämisestä.">
                        <i class="fa fa-question-circle fa-fw"></i>
                    </span>
            </div>
        </div>

        <div class="col-md-6">
            <div class="sitnet-info-text">{{'sitnet_faculty_name' | translate}}:</div>
            <div class="input-group">
                <input disabled type="text" class="form-control ng-pristine ng-valid" ng-model="newExam.course.institutionName"
                       ui-change="updateExam()">
                    <span class="input-group-addon" title="Ohjeet organisaation lisäämisestä.">
                        <i class="fa fa-question-circle fa-fw"></i>
                    </span>
            </div>
        </div>
    </div>

    <div class="row" ng-hide="newExam.course === undefined">
        <div class="row col-md-12">
            <div class="sitnet-info-text col-md-12">{{'sitnet_enrolment_url' | translate}}:</div>
        </div>
        <div class="row col-md-12">
            <div class="col-md-12">
                <a href="{{ hostname.hostname }}/#/enroll/{{ newExam.course.code }}">{{ hostname.hostname }}/#/enroll/{{ newExam.course.code }}</a>
            </div>
        </div>
    </div>

    <!-- Exam inspector and exam maxScore scale input elements -->
    <div class="row">
        <div class="col-md-12">
            <div class="sitnet-info-text">{{'sitnet_exam_instructor' | translate}}:</div>
            <div class="col-md-12 row">
                <div class="pull-left col-md-2 row">
                    <button class="btn btn-default" ng-click="openInspectorModal()">{{'sitnet_add' | translate}}</button>
                </div>
                <div class="pull-left col-md-9">
                    <ul>
                        <li class="pull-left" style="margin-left:0.5em;" ng-repeat="inspection in inspectors"><h6>{{ inspection.user.firstName }} {{ inspection.user.lastName }} <a ng-show="inspection.user.id != newExam.creator.id" ng-click="removeInspector(inspection.id)"><i class="fa fa-times pointer" title="{{'sitnet_remove' | translate}}"></i></a></h6></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Room name and exam length input elements -->
    <div class="row">
        <!--SIT-367, temporarily removed Room selection from exam-->
        <!--<div class="col-md-6">-->
            <!--<div class="sitnet-info-text">{{'sitnet_examination_location' | translate}}:</div>-->
            <!--<div class="input-group">-->
                <!--<div class="input-group-btn">-->
                    <!--<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">-->
                        <!--{{'sitnet_choose' | translate}}-->
                        <!--<span class="caret"></span>-->
                    <!--</button>-->
                    <!--<ul class="dropdown-menu">-->
                        <!--<li ng-repeat="room in examRooms" ng-click="setExamRoom(room)"><a class="pointer-hand">{{room.name}}</a>-->
                        <!--</li>-->
                    <!--</ul>-->
                <!--</div>-->
                   <!--<h6>-->
                       <!--{{newExam.room.name}}-->
                       <!--<i ng-if="newExam.room" class="fa fa-times" ng-click="removeExamRoom()" style="cursor: pointer;" title="Poista"></i>-->
                   <!--</h6>-->
            <!--</div>-->
        <!--</div>-->

        <div class="col-md-6">
            <div class="sitnet-info-text">{{'sitnet_exam_duration' | translate}} ({{'sitnet_minutes' | translate}}):</div>
            <div class="input-group">
                <button class="btn btn-default" ng-class="checkDuration(45)" ng-click="setExamDuration(45)">45</button>&nbsp;
                <button class="btn btn-default" ng-class="checkDuration(90)" ng-click="setExamDuration(90)">90</button>&nbsp;
                <button class="btn btn-default" ng-class="checkDuration(110)" ng-click="setExamDuration(110)">110</button>&nbsp;
                <button class="btn btn-default" ng-class="checkDuration(180)" ng-click="setExamDuration(180)">180</button>
            </div>
        </div>

        <div class="col-md-6">
            <div class="sitnet-info-text">{{'sitnet_exam_language' | translate}}:</div>
            <div class="input-group">
                <div class="input-group-btn">
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                        {{'sitnet_choose' | translate}}
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li ng-repeat="language in examLanguages" ng-click="setExamLanguage(language)">
                            <a class="pointer-hand">{{language}}</a>
                        </li>
                    </ul>
                </div>
                <input type="text" class="form-control" ng-model="newExam.examLanguage" ui-change="updateExam()">
            </div>
        </div>
    </div>

    <!-- Exam maxScore scale and exam type input elements -->
    <div class="row">
        <div class="col-md-6">
            <div class="sitnet-info-text">{{'sitnet_grade_scale' | translate}}:</div>
            <div class="input-group">
                <div class="input-group col-md-12">
                    <button class="btn btn-default" ng-class="checkGrading('0-5')" ng-click="setExamGrading('0-5')">0-5</button>&nbsp;
                    <button class="btn btn-default" ng-class="checkGrading('Improbatur-Laudatur')" ng-click="setExamGrading('Improbatur-Laudatur')">Improbatur-Laudatur</button>&nbsp;
                    <button class="btn btn-default" ng-class="checkGrading('Hyväksytty-Hylätty')" ng-click="setExamGrading('Hyväksytty-Hylätty')">Hyväksytty-Hylätty</button>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="sitnet-info-text">Suoritustyyppi:</div>
            <div class="input-group">
                <div class="input-group col-md-12">
                    <button class="btn btn-default" ng-class="checkType('Osasuoritus')" ng-click="setExamType('Osasuoritus')">Osasuoritus</button>&nbsp;
                    <button class="btn btn-default" ng-class="checkType('Loppusuoritus')" ng-click="setExamType('Loppusuoritus')">Loppusuoritus</button>&nbsp;
                </div>
            </div>
        </div>
    </div>

    <!-- Exam and answer language input elements -->
    <!--<div class="row">-->
        <!--<div class="col-md-6">-->
            <!--<div class="sitnet-info-text">{{'sitnet_exam_language' | translate}}:</div>-->
            <!--<div class="input-group">-->
                <!--<div class="input-group-btn">-->
                    <!--<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">-->
                        <!--{{'sitnet_choose' | translate}}-->
                        <!--<span class="caret"></span>-->
                    <!--</button>-->
                    <!--<ul class="dropdown-menu">-->
                        <!--<li ng-repeat="language in examLanguages" ng-click="setExamLanguage(language)">-->
                            <!--<a class="pointer-hand">{{language}}</a>-->
                        <!--</li>-->
                    <!--</ul>-->
                <!--</div>-->
                <!--<input type="text" class="form-control" ng-model="newExam.examLanguage" value="Suomi" ui-change="updateExam()">-->
            <!--</div>-->
        <!--</div>-->

        <!--div class="col-md-6">
            <div class="sitnet-info-text">{{'sitnet_exam_answer_language' | translate}}:</div>
            <div class="input-group">
                <div class="input-group-btn">
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
                        {{'sitnet_choose' | translate}}
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li ng-repeat="answerLanguage in examAnswerLanguages"
                            ng-click="setExamAnswerLanguage(answerLanguage)"><a class="pointer-hand">{{answerLanguage}}</a>
                        </li>
                    </ul>
                </div>
                <input type="text" class="form-control" ng-model="newExam.answerLanguage" ui-change="updateExam()">
            </div>
        </div-->
    <!--</div>-->

    <!--<div class="row base">-->
            <!--<div class="checkbox">-->
                <!--<label>-->
                    <!--<input type="checkbox" ng-model="newExam.shared" ui-blur="updateExam()"> {{'sitnet_share_this_exam' |-->
                    <!--translate}}-->
                <!--</label>-->
            <!--</div>-->
        <!--</div>-->

        <div class="row">
            <!-- Exam software -->
            <div class="col-md-6">
                <div class="sitnet-info-text">{{'sitnet_machine_softwares' | translate}}</div>
                <multiselect class="input-xlarge"
                             multiple="true"
                             ng-model="newExam.softwares"
                             header="{{'sitnet_select' | translate}}"
                             multiheader="selectedSoftwares(newExam)"
                             options="software.id as software.name for software in softwares"
                             change="updateSoftwareInfo(newExam)" >

                </multiselect>
            </div>

            <!--Attachment file-->
            <div class="col-md-6">
                <div class="sitnet-info-text">
                    {{'sitnet_exam_attacment' | translate}}
                </div>
                <div ng-show="newExam.attachment" ng-controller="AttachmentController">
                    <a class="pointer" ng-click="downloadExamAttachment(newExam)">{{newExam.attachment.fileName}}  </a>
                    <span class="sitnet-red pointer" ng-click="removeExamAttachment(newExam)"> <i class="fa fa-times" title="{{'sitnet_remove_attachment' | translate }}"></i></span>
                </div>
                <button class="btn btn-default" ng-click="selectFile()" >{{'sitnet_attach_file' | translate}}</button>
            </div>
        </div>

    <!-- Exam instruction -->

    <div class="row">
        <div class="exam-general-information col-md-12">
            <div class="exam-general-information-header">
                {{'sitnet_instruction' | translate}}
            </div>
            <div class="sitnet-info-text">
                {{'sitnet_exam_instruction' | translate}}
            </div>
            <div class="input-group exam-info">
                <textarea class="form-control" rows="4" cols="150" ng-model="newExam.instruction" ui-change="updateExam()"
                          placeholder="{{'sitnet_placeholder_write_instruction' | translate}}">
                </textarea>
            </div>
            <!--Enrolment info-->
            <div class="sitnet-info-text">
                {{'sitnet_enroll_instruction' | translate}}
            </div>
            <div class="input-group exam-info">
                <textarea class="form-control" rows="4" cols="150" ng-model="newExam.enrollInstruction" ui-change="updateExam()"
                          placeholder="{{'sitnet_placeholder_write_instruction' | translate}}">
                </textarea>
            </div>
        </div>
    </div>
</div>
