<div id="sitnet-header" class="header">
    <div class="col-md-8 header-wrapper">
        <span class="header-text">{{'sitnet_question' | translate}}</span>
    </div>
    <div class="col-md-2 header-wrapper">
        <a ng-controller="QuestionListingController" ng-click="copyQuestion(newQuestion); getQuestions()" class="btn header-button pull-right">{{'sitnet_question_copy' | translate}}</a>
    </div>
    <div class="col-md-2 nospace">
        <!--<span class="header-clock pull-right">
            <span class="col-md-12 nospace weekday">24. lauantai</span>
            <span class="col-md-12 nospace date">Toukokuuta 2014</span>
            <span class="col-md-12 nospace clock"></span>
        </span>-->
    </div>
</div>

<div id="room">
    <span class="sitnet-horizontal-line col-md-12"></span>
    <div class="col-md-8 bottom-padding-2" ng-controller="QuestionCtrl">
        <form name="questionForm" novalidate>
            <div class="row">
<!--                   <div class="col-md-6">
                    <div class="sitnet-info-text">
                            Kysymyksen lyhyt nimi: <br><input class="col-md-2 form-control" name="shortname"><br>
                    </div>
                </div>-->
                <div class="col-md-6">
                    <div class="sitnet-info-text">
                        <div class="checkbox">
                            <label>
                                <br>
                                <input type="checkbox" ng-model="newQuestion.shared" ui-change="saveQuestion()"> {{'sitnet_share_this_question' | translate}}
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <br>
            <div class="row">
                <div class="sitnet-info-text col-md-12">
                    {{'sitnet_question_type' | translate}}
                    <select  class="form-control" ng-model="selectedType" ng-change="setQuestionType()"
                             ng-options="key as value for (key, value) in questionTypes"  >
                    </select>
                </div>
            </div>

            <br>

            <!-- Question header -->
            <div class="row">
                <div class="col-md-12">
                    <textarea ck-editor rows="10" cols="80" ng-model="newQuestion.question" ng-model-options="{ updateOn: 'load' }" ui-change="saveQuestion()" placeholder="{{'sitnet_question_write_name' | translate}}">
                    </textarea>
                </div>
            </div>

            <hr>
                <div ng-include="questionTemplate"></div>
            <hr>


            <!-- Question fields -->

            <!-- Essay -->
            <div ng-show="selectedType == 'EssayQuestion'">
                <div class="sitnet-info-text">
                    {{'sitnet_evaluation_type' | translate}}
                    <div class="row">
                        <div class="col-md-2">
                            <select class="form-control" ng-model="newQuestion.evaluationType" ng-change="saveQuestion()">
                                <option value="Points">{{ 'sitnet_evaluation_points' | translate }}</option>
                                <option value="Select">{{ 'sitnet_evaluation_select' | translate }}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <!-- POINTS -->
                <div class="sitnet-info-text" ng-show="selectedType == 'EssayQuestion' && newQuestion.evaluationType == 'Points'">
                    {{'sitnet_scores' | translate}}
                    <label ng-hide="questionForm.maxScore.$valid"> kentän arvon on oltava numero</label>
                    <div class="row">
                        <div class="col-md-2">
                            <input name="maxScore" type="text" class="col-md-2 form-control" ng-model="newQuestion.maxScore"
                                   ui-change="questionForm.maxScore.$valid ? saveQuestion() : false" required ng-pattern="/^\d*(\.\d+)?$/">
                        </div>
                    </div>
                </div>
                <!-- SELECT -->
                <div class="sitnet-info-text" ng-show="selectedType == 'EssayQuestion' && newQuestion.evaluationType == 'Select'" ng-model="newQuestion.maxScore">
                    <div>
                        {{ 'sitnet_approved' | translate }} / {{ 'sitnet_rejected' | translate }}
                    </div>
                </div>
            </div>

            <!-- Multi -->
            <div ng-show="selectedType == 'MultipleChoiceQuestion'">
                <div class="sitnet-info-text">
                    {{'sitnet_scores' | translate}}
                    <label ng-hide="questionForm.maxScore.$valid"> kentän arvon on oltava numero</label>
                    <div class="row">
                        <div class="col-md-2">
                            <input name="maxScore" type="text" class="col-md-2 form-control" ng-model="newQuestion.maxScore"
                                   ui-change="questionForm.maxScore.$valid ? saveQuestion() : false" required ng-pattern="/^\d*(\.\d+)?$/">
                        </div>
                    </div>
                </div>
            </div>

            <div class="sitnet-info-text">
                {{'sitnet_instruction' | translate}}
                <textarea class="form-control" rows="3" ng-model="newQuestion.instruction" ui-change="saveQuestion()"
                       placeholder="{{'sitnet_question_instruction' | translate}}">
                </textarea>
            </div>

                <div class="sitnet-info-text">
                    {{'sitnet_exam_evaluation_criteria' | translate}}
                    <textarea class="form-control" rows="3" ng-model="newQuestion.evaluationCriterias" ui-change="saveQuestion()"
                              placeholder="{{'sitnet_correct_answer_should_have' | translate}}">
                    </textarea>
                </div>
                <div class="sitnet-info-text">
                    {{'sitnet_question_attachment' | translate}}
                </div>
                <div ng-show="newQuestion.attachment !== null">
                    {{newQuestion.attachment.fileName}} <a href="/attachment/question/delete/{{newQuestion.id}}"> {{'sitnet_remove_attachment' | translate }} </a>
                                                        <a href="/attachment/question/download/{{newQuestion.id}}"> {{'sitnet_download_attachment' | translate }} </a>
                </div>
                <br>
                <button ng-click="selectFile()"class=form-control">{{'sitnet_attach_file' | translate}}</button>

            <p>
                <!--ng-show="selectedType"-->
                <button ng-disabled="!questionForm.$valid" ng-click="saveQuestion(); go(returnURL)" type="submit" class="btn btn-success pull-right">{{'sitnet_save' | translate}}</button>
            </p>
        </form>
    </div>

    <div class="col-md-4 bottom-padding-2" ng-controller="QuestionListingController">
        <div class="vertical-padding-2"></div>
        <div class="col-md-12 room-sub-header">
            <span class="room-sub-name pull-left">{{ 'sitnet_questions' | translate }}</span>
        </div>
        <div class="room-machines col-md-12">

            <table class="table table-bordered table-condensed room-machines-table questionTable" ng-init="getQuestions()">
                <thead>
                <tr>
                    <th>{{ 'sitnet_question' | translate }}</th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="question in questions">
                    <td>
                        <a class="room-info-title bold-button" href="#/questions/{{question.id}}" ng-bind-html="question.question"></a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>