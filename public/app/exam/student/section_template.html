<form class="form-inline" role="form">
    <div ng-show="guide">
        <div class="guide-instruction col-md-12" ng-bind-html="exam.instruction"></div>
    </div>
    <div ng-show="!guide">
        <div class="col-md-12 info-row">
            {{activeSection.description}}
        </div>
        <div class="{{sectionQuestion.selectedAnsweredState}} col-md-12 info-row"
             ng-repeat="sectionQuestion in activeSection.sectionQuestions | orderBy: 'sequenceNumber'"
             ng-init="examService.setQuestionColors(sectionQuestion.question); sectionQuestion.expanded = true;">

            <div class="row">
                <!-- chevron -->
                <div class="col-md-1 fa-stack fa-lg pointer " ng-click="chevronClicked(sectionQuestion)">
                    <i ng-class="sectionQuestion.expanded ? 'fa-chevron-down sitnet-text' : 'fa-chevron-right sitnet-text-medium'"
                       class="sitnet-text-medium fa fa-chevron-left fa-stack-1x">
                    </i>
                </div>
                <!-- question type icon -->
                <div class="col-md-1 fa-stack fa-lg">
                    <i class="fa fa-stop fa-stack-2x question-icon-bg"></i>
                    <i class="fa fa-stack-1x question-icon fa-list-ul"
                       ng-if="sectionQuestion.question.type === 'MultipleChoiceQuestion'"></i>
                    <i class="fa fa-stack-1x question-icon fa-balance-scale"
                       ng-if="sectionQuestion.question.type === 'WeightedMultipleChoiceQuestion'"></i>
                    <i class="fa fa-stack-1x question-icon fa-pencil-square-o"
                       ng-if="sectionQuestion.question.type === 'EssayQuestion'">
                    </i>
                </div>
                <span class="col-md-7 question-type-text">
                    <strong ng-if="sectionQuestion.question.type === 'EssayQuestion'">{{ 'sitnet_essay' | translate }}</strong>
                    <strong ng-if="sectionQuestion.question.type === 'MultipleChoiceQuestion'">{{ 'sitnet_question_mc' | translate }}</strong>
                    <strong ng-if="sectionQuestion.question.type === 'WeightedMultipleChoiceQuestion'">{{ 'sitnet_question_weighted_mc' | translate }}</strong>
                </span>
                <div class="col-md-3 question-type-text">
                    <span class="pull-right">
                         <i class="text-info fa fa-star"></i>
                        <span ng-if="sectionQuestion.evaluationType == 'Selection'">
                             {{'sitnet_evaluation_select' | translate}}
                        </span>
                        <span ng-if="sectionQuestion.evaluationType !== 'Selection'">
                            {{sectionQuestion.derivedMaxScore}} {{'sitnet_unit_points' | translate}}
                        </span>
                    </span>


                </div>
            </div>
            <!-- question text -->
            <div class="row bottom-padding-2">
                <div class="col-md-12 question-text">
                    <div ng-if="sectionQuestion.expanded" mathjax ng-bind-html="trustAsHtml(sectionQuestion.question.question)"></div>
                    <div ng-if="!sectionQuestion.expanded" mathjax ng-bind-html="trustAsHtml(truncate(sectionQuestion.question.question, 240))"></div>
                </div>
            </div>

            <!-- attachment -->
            <div class="row" ng-show="sectionQuestion.question.attachment">
                <div class="col-md-12" ng-controller="AttachmentController">
                    <a class="pointer question-text question-type-text"
                       ng-click="downloadQuestionAttachment(sectionQuestion.question)">
                        <i class="text-success fa fa-download"></i>
                        {{'sitnet_download_question_attachment' | translate }}
                        <span class="text"><small>({{sectionQuestion.question.attachment.fileName}})</small>
                        </span>
                    </a>
                </div>
            </div>

            <!-- instruction -->
            <div class="row" ng-show="sectionQuestion.answerInstructions">
                <div class="col-md-12">
                    <p class="question-text question-type-text">
                        <i class="text-info fa fa-info-circle"></i>
                        {{'sitnet_instructions' | translate }}:&nbsp;{{sectionQuestion.answerInstructions}}</p>
                </div>
            </div>

            <!-- answer -->
            <div class="exam-question-container" ng-show="sectionQuestion.expanded">

                <div class="question">
                    <!-- content-->
                    <div ng-include="sectionQuestion.question.template"></div>
                </div>
            </div>

        </div>
    </div>
</form>
