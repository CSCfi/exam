<div class="col-md-12 mart40">
    <div class="review-list-title">{{ 'sitnet_exam_autoevaluation' | translate }}
        <span ng-if="autoevaluation.enabled">({{'sitnet_in_use' | translate}})</span>
        <span ng-if="!autoevaluation.enabled">({{'sitnet_not_in_use' | translate}})</span>
        <a popover-placement="left" popover-popup-delay="1000"
           popover-trigger="mouseenter" uib-popover="{{ 'sitnet_show' | translate }} / {{ 'sitnet_hide' | translate }}"
           ng-click="autoevaluationDisplay.visible = !autoevaluationDisplay.visible">
            <img ng-show="!autoevaluationDisplay.visible" src="../../../assets/assets/images/icon_list_show_right.svg" alt="exam"
                 onerror="this.onerror=null;this.src='../../../assets/assets/images/icon_list_show_right.png'" />
            <img ng-show="autoevaluationDisplay.visible" src="../../../assets/assets/images/icon_list_show_down.svg" alt="exam"
                 onerror="this.onerror=null;this.src='../../../assets/assets/images/icon_list_show_down.png'" />
        </a>
    </div>
</div>

<div class="col-md-12 margin-20" ng-show="autoevaluationDisplay.visible">
    <span class="autoevaluation-info">
        {{'sitnet_autoevaluation_instructions' | translate}}
    </span>
    <div class="review-attachment-button autoeval-button">

        <a class="pointer" ng-if="!autoevaluation.enabled" ng-model="autoevaluation.enabled" ng-click="autoevaluation.enabled=true">
            {{'sitnet_use_autoevaluation' | translate}}</a>
        <a class="pointer" ng-if="autoevaluation.enabled" class="notinuse" ng-model="autoevaluation.enabled" ng-click="autoevaluation.enabled=false">
            {{'sitnet_do_not_use_autoevaluation' | translate}}</a>

    </div>
</div>



<div ng-show="autoevaluationDisplay.visible">
    <div class="top-row">
        <div class="col-md-1 autoevaluation-titles"><strong>{{'sitnet_exam_grade' |Â translate}}</strong></div>
        <div class="col-md-2 autoevaluation-titles"><strong>{{'sitnet_percentage' | translate}}</strong></div>
        <div class="col-md-2 autoevaluation-titles"><strong>{{'sitnet_point_limit' | translate}}</strong></div>
    </div>
    <form role="form">
        <div ng-repeat="ge in newExam.autoEvaluationConfig.gradeEvaluations | orderBy: ge.grade.id">
            <div class="row margin-20 padl30">
                <div class="col-md-1 autoevaluation-numbers">
                    {{ getGradeDisplayName(ge.grade) }}
                </div>
                <div class="col-md-2">
                    <input ng-disabled="!autoevaluation.enabled" type="number" class="form-control autoevaluation-inputs"
                           ng-model="ge.percentage"
                           min="0" max="100"
                           required unique-value items="newExam.autoEvaluationConfig.gradeEvaluations" property="percentage">
                    <span>&percnt;</span>
                </div>
                <div class="col-md-2 autoevaluation-numbers">
                    {{ calculatePointLimit(ge) }}
                </div>
            </div>
        </div>
    </form>



    <div class="top-row">
        <div class="col-md-12">
            <div class="sitnet-info-text">{{'sitnet_autoevaluation_release_type' | translate}}:</div>
            <div class="dropdown" uib-dropdown>
                <button class="btn btn-default dropdown-toggle" ng-disabled="!autoevaluation.enabled" type="button" data-toggle="dropdown"
                        uib-dropdown-toggle
                        aria-expanded="true">
                    {{ selectedReleaseType().translation | translate}}&nbsp;<span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                    <li ng-repeat="type in autoevaluation.releaseTypes" role="presentation"
                        ng-class="type.filtered ? 'active': ''" ng-click="applyFilter(type)">
                        <a role="menuitem" class="pointer">
                            {{type.translation | translate}}
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <form role="form">
        <div class="bottom-row" ng-if="selectedReleaseType().name === 'GIVEN_DATE'">
            <div class="col-md-6" ng-controller="DatepickerCtrl">
                <div class="sitnet-info-text">{{'sitnet_autoevaluation_release_date' | translate}}:</div>
                <div class="input-group">
                    <input type="text" class="form-control" uib-datepicker-popup="{{format}}"
                           ng-model="newExam.autoEvaluationConfig.releaseDate"
                           is-open="startDateOpened" minDate="new Date()"
                           datepicker-options="dateOptions"
                           close-text="{{'sitnet_close' | translate}}"
                           current-text="{{'sitnet_today' | translate}}"
                           toggle-weeks-text="{{'sitnet_weeks' | translate}}"
                           clear-text="{{'sitnet_clear' | translate}}" date-validator
                           required>

                        <span class="input-group-btn">
                            <button class="btn btn-default" ng-click="openStartDate($event)">
                                <i class="fa fa-calendar"></i>
                            </button>
                        </span>
                </div>
            </div>
        </div>
        <div class="bottom-row" ng-if="selectedReleaseType().name === 'GIVEN_AMOUNT_DAYS'">
            <div class="col-md-12">
                <div class="sitnet-info-text">{{'sitnet_autoevaluation_release_after_days' | translate}}:</div>
                <input type="number" class="form-control"
                       ng-model="newExam.autoEvaluationConfig.amountDays"
                       min="1" max="60"
                       required>
            </div>
        </div>
    </form>
</div>
