<div class="detail-row">
    <div class="col-md-12">
        <table class="table table-striped table-condensed" ng-init="predicate='reservation.startAt'; reverse=false">
            <thead ng-init="predicate='reservation.startAt'">
            <tr>
                <th sort by="userAggregate" title="sitnet_student" predicate="predicate" reverse="reverse"></th>
                <th sort by="exam.name" title="sitnet_exam" predicate="predicate" reverse="reverse"></th>
                <th sort by="exam.course.code" title="sitnet_examcode" predicate="predicate" reverse="reverse"></th>
                <th sort by="teacherAggregate" title="sitnet_teachers" predicate="predicate" reverse="reverse"></th>
                <th sort by="reservation.startAt" title="sitnet_date_time" predicate="predicate" reverse="reverse"></th>
                <th sort by="reservation.machine.room.name" title="sitnet_exam_machine" predicate="predicate" reverse="reverse"></th>
                <th sort by="stateOrd" title="sitnet_exam_state" predicate="predicate" reverse="reverse"></th>
                <th ng-if="isAdminView()">{{'sitnet_remove_reservation' | translate}}</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="enrolment in enrolments | orderBy:predicate:reverse">
                <td>
                    <span>{{enrolment.user.firstName}} {{enrolment.user.lastName}}</span>
                    <span ng-if="enrolment.user.userIdentifier">&nbsp;({{enrolment.user.userIdentifier}})</span>
                    <span><br/><a href="mailto:{{enrolment.user.email}}">{{enrolment.user.email}}</a></span>
                </td>
                <td ng-if="enrolment.exam.state === 'PUBLISHED'">{{ enrolment.exam.name }}</td>
                <td ng-if="enrolment.exam.state !== 'PUBLISHED'">
                    <a href="#/exams/review/{{enrolment.exam.id}}">{{enrolment.exam.name}}</a>
                </td>
                <td>{{ enrolment.exam.course.code }}</td>

                <td ng-if="enrolment.exam.parent" class="width15">
                    <assessment-teacher-list exam="enrolment.exam"/>
                </td>
                <td ng-if="!enrolment.exam.parent" class="width15">
                    <teacher-list exam="enrolment.exam"/>
                </td>

                <td>{{enrolment.reservation.startAt | adjustdst | date:'dd.MM.yyyy'}}<br/>{{'sitnet_clock_short' |
                    translate}} {{enrolment.reservation.startAt | adjustdst |
                    date:'HH:mm'}}-{{enrolment.reservation.endAt | adjustdst | date:'HH:mm'}}
                </td>
                <td>{{enrolment.reservation.machine.room.name}}<br/>{{enrolment.reservation.machine.name}}</td>
                <td>{{'sitnet_exam_status_' + printExamState(enrolment) | lowercase | translate}}</td>

                <td ng-if="isAdminView()">
                    <button ng-if="enrolment.exam.state === 'PUBLISHED' && !enrolment.reservation.noShow"
                            ng-click="removeReservation(enrolment)" class="btn btn-primary pull-left">
                        {{'sitnet_remove_reservation' | translate}}
                    </button>
                    <button ng-if="enrolment.exam.state === 'ABORTED' || enrolment.reservation.noShow"
                            ng-click="permitRetrial(enrolment.reservation)"
                            ng-disabled="!enrolment.exam.trialCount || enrolment.reservation.retrialPermitted"
                            class="btn btn-primary pull-left">
                        {{'sitnet_permit_retrial' | translate}}
                    </button>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
