<table class="table table-striped table-condensed exams-table mar60" ng-init="predicate='reservation.startAt'; reverse=false">
    <thead ng-init="predicate='reservation.startAt'">
    <tr>
        <th class="reservation-search" sort by="userAggregate" text="sitnet_student" predicate="predicate" reverse="reverse"></th>
        <th class="reservation-search" sort by="exam.name" text="sitnet_exam" predicate="predicate" reverse="reverse"></th>
        <th class="reservation-search" sort by="exam.course.code" text="sitnet_examcode" predicate="predicate" reverse="reverse"></th>
        <th class="reservation-search" sort by="teacherAggregate" text="sitnet_teachers" predicate="predicate" reverse="reverse"></th>
        <th class="reservation-search" sort by="reservation.startAt" text="sitnet_date_time" predicate="predicate" reverse="reverse"></th>
        <th class="reservation-search" sort by="reservation.machine.room.name" text="sitnet_exam_machine" predicate="predicate" reverse="reverse"></th>
        <th class="reservation-search" sort by="stateOrd" text="sitnet_exam_state" predicate="predicate" reverse="reverse"></th>
        <th class="reservation-search" ng-if="isAdminView()">{{'sitnet_remove_reservation' | translate}}</th>
        <th class="reservation-search" ng-if="isAdminView()">{{'sitnet_change_reservation_machine'  | translate}}</th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="enrolment in enrolments | orderBy:predicate:reverse">
        <td class="reservation-search">
            <span>{{enrolment.user.firstName}} {{enrolment.user.lastName}}</span>
            <span ng-if="enrolment.user.userIdentifier">&nbsp;({{enrolment.user.userIdentifier}})</span>
            <span><br/><a class="reservation" href="mailto:{{enrolment.user.email}}">{{enrolment.user.email}}</a></span>
        </td>
        <td class="reservation-search" ng-if="enrolment.exam.state === 'PUBLISHED'">{{ enrolment.exam.name }}</td>
        <td class="reservation-search" ng-if="enrolment.exam.state !== 'PUBLISHED'">
            <a href="/exams/review/{{enrolment.exam.id}}">{{enrolment.exam.name}}</a>
        </td>
        <td class="reservation-search">{{ enrolment.exam.course.code }}</td>

        <td ng-if="enrolment.exam.parent" class="width15">
            <assessment-teacher-list exam="enrolment.exam"/>
        </td>
        <td class="reservation-search" ng-if="!enrolment.exam.parent" class="width15">
            <teacher-list exam="enrolment.exam"/>
        </td>

        <td class="reservation-search">{{enrolment.reservation.startAt | adjustdst | date:'dd.MM.yyyy'}}<br/>{{enrolment.reservation.startAt | adjustdst |
            date:'HH:mm'}}-{{enrolment.reservation.endAt | adjustdst | date:'HH:mm'}}
        </td>
        <td class="reservation-search">{{enrolment.reservation.machine.room.name}}<br/>{{enrolment.reservation.machine.name}}</td>
        <td class="reservation-search {{getStateclass(enrolment)}}">{{'sitnet_exam_status_' + printExamState(enrolment) | lowercase | translate}}</td>

        <td class="reservation-search" ng-if="isAdminView()">
            <button ng-if="enrolment.exam.state === 'PUBLISHED' && !enrolment.reservation.noShow"
                    ng-click="removeReservation(enrolment)" class="btn btn-primary pull-left">
                {{'sitnet_remove_reservation' | translate}}
            </button>
            <button ng-if="enrolment.exam.state === 'ABORTED' || enrolment.reservation.noShow"
                    ng-click="permitRetrial(enrolment.reservation)"
                    ng-disabled="!enrolment.exam.trialCount || enrolment.reservation.retrialPermitted"
                    class="btn btn-primary pull-left">
                {{'sitnet_permit_retrial' | translate}}
            </button>
        </td>
        <td class="reservation-search" ng-if="isAdminView()">
            <button ng-if="enrolment.exam.state === 'PUBLISHED' && !enrolment.reservation.noShow"
                    ng-click="changeReservationMachine(enrolment.reservation)" class="btn btn-primary pull-left">
                {{'sitnet_change_reservation_machine' | translate}}
            </button>
        </td>
    </tr>
    </tbody>
</table>
