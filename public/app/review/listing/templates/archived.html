<div class="main-row">
    <div class="col-md-12">
        <div class="review-list-title" >{{ 'sitnet_archived_exams' | translate }}
            <a ng-click="$ctrl.toggleArchivedReviews = !$ctrl.toggleArchivedReviews" class="pointer">
                <img ng-show="!$ctrl.toggleArchivedReviews" src="/assets/assets/images/icon_list_show_right.svg" alt="exam"
                     onerror="this.onerror=null;this.src='/assets/assets/images/icon_list_show_right.png'" />
                <img ng-show="$ctrl.toggleArchivedReviews" src="/assets/assets/images/icon_list_show_down.svg" alt="exam"
                     onerror="this.onerror=null;this.src='/assets/assets/images/icon_list_show_down.png'" />
            </a>
        </div>
    </div>
</div>

<div ng-show="$ctrl.archivedReviews.length === 0">
    <div class="col-md-12 review-no-results">
        <i class="fa fa-exclamation-circle padl20 grayish"></i>
        {{ 'sitnet_exam_archived' | translate }}</div>
</div>



<div ng-show="$ctrl.toggleArchivedReviews && $ctrl.archivedReviews.length > 0">

    <div class="form-group input-group search tab-search review-list-search padl0 marl30">
        <input ng-model="$ctrl.filterArchived"
               ng-model-options="{updateOn: 'default blur', debounce: {'default': 500, 'blur': 0} }" type="text"
               class="form-control search"
               placeholder="{{'sitnet_search' | translate }}" popover-placement="top" popover-popup-delay="500"
               popover-trigger="'mouseenter'" uib-popover="{{ 'sitnet_exam_search_description' | translate }}">
        <div class="input-group-addon search">
            <img class="nopad" src="/assets/assets/images/icon_search.png" width="49" height="40">
        </div>
    </div>

    <table class="table table-striped exams-table">
        <thead ng-init="$ctrl.archivedPredicate = 'displayedGradingTime'">
        <tr>
            <th sort by="user.lastName" text="sitnet_student" predicate="$ctrl.archivedPredicate" reverse="$ctrl.reverse"></th>
            <th sort by="user.email" text="sitnet_email" predicate="$ctrl.archivedPredicate" reverse="$ctrl.reverse"></th>
            <th sort by="started" text="sitnet_exam_duration" predicate="$ctrl.archivedPredicate" reverse="$ctrl.reverse"></th>
            <th sort by="displayedGrade" text="sitnet_grade" predicate="$ctrl.archivedPredicate" reverse="$ctrl.reverse"></th>
            <th sort by="displayedCredit" text="sitnet_exam_credit" predicate="$ctrl.archivedPredicate" reverse="$ctrl.reverse"></th>
            <th sort by="displayedGradingTime" text="sitnet_graded" predicate="$ctrl.archivedPredicate" reverse="$ctrl.reverse"></th>
        </tr>
        </thead>

        <tbody>
        <tr ng-repeat="review in $ctrl.archivedReviews | orderBy:$ctrl.archivedPredicate:$ctrl.reverse| offset: $ctrl.currentPageArchived*$ctrl.pageSize | limitTo: $ctrl.pageSize | filter: $ctrl.filterArchived as resArchived">
            <td class="table-column-13 table-column-bold">
                <a class="pointer" href="/assessments/{{review.exam.id}}">
                    {{review.user.firstName}} {{review.user.lastName}}
                    <span ng-if="review.user.userIdentifier"><br/>({{review.user.userIdentifier}})</span>
                </a>
            </td>
            <td class="table-column-15"><a class="pointer smaller" href="mailto:{{review.user.email}}">{{review.user.email}}</a>
            </td>
            <td class="table-column-20">{{review.started | adjustdst | date: 'dd.MM.yyyy'}}
                {{'sitnet_clock_short' |
                translate}} {{review.started | adjustdst | date: 'HH:mm'}} -
                {{review.ended | adjustdst | date: 'HH:mm'}}
                ({{review.started | diffInMinutesTo:review.ended }}&nbsp;min)
            </td>
            <td class="table-column-25">{{$ctrl.translateGrade(review.exam)}}</td>
            <td class="table-column-10">
                {{ $ctrl.printExamCredit(review.exam.course.credits, review.exam.customCredit) }}
            </td>
            <td class="table-column-15">{{review.displayedGradingTime | date:'dd.MM.yyyy'}}</td>
        </tr>
        <!--Fill if page not full-->
        <tr ng-repeat="r in [] | pagefill: $ctrl.archivedReviews.length:$ctrl.currentPageArchived:$ctrl.pageSize">
            <td class="table-column-examname">&nbsp;</td>
            <td colspan="5"></td>
        </tr>
        <tr ng-if="resArchived.length == 0"><td colspan="6">{{'sitnet_review_no_result' | translate}}</td></tr>

        </tbody>
    </table>
</div>

<div class="detail-row">
    <div col-md-12 ng-show="$ctrl.archivedReviews.length > $ctrl.pageSize">
        <paginator items="$ctrl.archivedReviews" page-size="$ctrl.pageSize" current-page="$ctrl.currentPageArchived"/>
    </div>
</div>
