<!-- Refresh MathJax syntax some time after page was rendered -->
<script type="text/javascript">
    $('#vmenu').hide();
    var mainView = $('#mainView');
    mainView.css("margin", "0 15px");
    mainView.css("max-width", "1000px");
</script>
<div id="exam-print" ng-init="init();">
    <div class="row">
        <div class="col-md-12">
            <h3>{{exam.course.code}} - {{exam.name}},
                <small>{{exam.course.credits}} op</small>
            </h3>
        </div>
    </div>

    <!-- General Information -->
    <div class="row">
        <div class="col-md-12">
            <h4>
                {{'sitnet_student_and_exam_info' | translate}}
            </h4>
        </div>
    </div>
    <div class="row">
        <div class="col-md-2"><strong>{{'sitnet_name' | translate}}:</strong></div>
        <div class="col-md-4">{{userInfo.user.firstName}} {{userInfo.user.lastName}}</div>
        <div class="col-md-2"><strong>{{'sitnet_email' | translate}}:</strong></div>
        <div class="col-md-4">{{userInfo.user.email}}</div>
    </div>
    <div class="row">
        <div class="col-md-2"><strong>{{'sitnet_time_of_exam_participation' | translate}}:</strong></div>
        <div class="col-md-4">{{userInfo.started | adjustdst | date:'dd.MM.yyyy HH:mm'}} -
            {{userInfo.ended | adjustdst | date:'dd.MM.yyyy HH:mm'}}
        </div>
        <div class="col-md-2"><strong>{{'sitnet_exam_duration' | translate}}:</strong></div>
        <div class="col-md-4">{{userInfo.duration}}</div>
    </div>
    <div class="row" ng-show="enrolment && enrolment.information">
        <div class="col-md-2"><strong>{{'sitnet_student_enrolment_info' | translate }}:</strong></div>
        <div class="col-md-10">{{enrolment.information}}</div>
    </div>
    <div class="row">
        <div class="col-md-2"><strong>{{'sitnet_examination_location' | translate}}:</strong></div>
        <div class="col-md-4" ng-if="reservation && reservation.room">{{reservation.room.name}}
            ({{reservation.room.roomCode}})
        </div>
        <div class="col-md-4" ng-if="!reservation || !reservation.room">N/A</div>
        <div class="col-md-2"><strong>{{'sitnet_exam_machine' | translate}}:</strong></div>
        <div class="col-md-4" ng-if="reservation">{{reservation.name}}</div>
        <div class="col-md-4" ng-if="!reservation">N/A</div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <h4>
                {{'sitnet_previous_exam_participations' | translate}}
            </h4>
        </div>
    </div>
    <div class="row" ng-repeat="participation in previousParticipations">
        <div class="col-md-2">{{participation.started | adjustdst | date:'dd.MM.yyyy' }}</div>
        <div class="col-md-4"><strong>{{'sitnet_exam_state' | translate}}:</strong>&nbsp;&nbsp;&nbsp;
            {{'sitnet_exam_status_' + participation.exam.state | lowercase | translate}}
        </div>
        <div class="col-md-6">
            {{'sitnet_grade' | translate }}:&nbsp;&nbsp;&nbsp;{{ translateGrade(participation.exam) }}
        </div>
    </div>
    <div class="row" ng-hide="previousParticipations">
        <div class="col-md-12">N/A</div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <h4>
                {{'sitnet_exam_instruction' | translate}}
            </h4>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12" ng-hide="exam.instruction">N/A</div>
        <div class="col-md-12" ng-show="exam.instruction">
            <div ng-hide="exam.instruction" mathjax ng-bind-html="exam.instruction"></div>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <h4>
                {{'sitnet_exam_attachment' | translate}}
            </h4>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12" ng-hide="exam.attachment">N/A</div>
        <div class="col-md-12" ng-show="exam.attachment">
            {{exam.attachment.fileName}}
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            <h4>
                {{'sitnet_questions' | translate}}
            </h4>
        </div>
    </div>

    <!-- Sections -->
    <div class="top-margin-1 col-md-12" ng-repeat="section in exam.examSections |Â orderBy: 'sequenceNumber'"
         ng-include="printSectionTemplate">
    </div>


    <!-- Grading -->
    <div class="row">
        <div class="col-md-12">
            <h4>
                {{'sitnet_comments' | translate}}
            </h4>
        </div>
    </div>
    <!-- Total score -->
    <div class="row" ng-show="getExamMaxPossibleScore(exam) > 0">
        <div class="col-md-3"><strong>{{'sitnet_total_score' | translate}}:</strong></div>
        <div class="col-md-9">
            {{getExamTotalScore(exam)}} / {{getExamMaxPossibleScore(exam) }}
        </div>
    </div>


    <div class="row" ng-show="hasEssayQuestions">
        <div class="col-md-3"><strong>{{ 'sitnet_approved' | translate }}:</strong></div>
        <div class="col-md-9">{{ acceptedEssays }}</div>
    </div>

    <div class="row" ng-show="hasEssayQuestions">
        <div class="col-md-3"><strong>{{ 'sitnet_rejected' | translate }}:</strong></div>
        <div class="col-md-9">{{ rejectedEssays }}</div>
    </div>

    <div class="row">
        <div class="col-md-3"><strong>{{'sitnet_teachers_comment' | translate}}:</strong></div>
        <div class="col-md-9" mathjax ng-bind-html="exam.examFeedback.comment"></div>
    </div>
    <div class="row" ng-show="exam.examFeedback.attachment">
        <div class="col-md-3"><strong>{{'sitnet_feedback_attachment' | translate}}:</strong></div>
        <div class="col-md-9" ng-show="exam.examFeedback.attachment">
            {{exam.examFeedback.attachment.fileName}}
        </div>
    </div>

    <div ng-show="getTeacherCount() > 1 && !isReadOnly()">
        <div class="row">
            <div class="col-md-3"><strong>{{ 'sitnet_exam_owners' | translate }}:</strong></div>
            <div class="col-md-9">
                    <span ng-if="exam.parent.examOwners.length > 0"
                          ng-repeat="teacher in exam.parent.examOwners">
                        {{teacher.firstName}} {{teacher.lastName}} {{ $last ? '' : ', ';}}
                    </span>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3">
                <strong>{{'sitnet_exam_instructor' | translate}} ({{'sitnet_inspection_status' |
                    translate}}):</strong>
            </div>
            <div class="col-md-9">
                    <span ng-repeat="inspection in inspections">
                        <span>{{inspection.user.firstName}} {{inspection.user.lastName}}</span>
                        <span ng-if="isLocalReady(inspection.user.id)">({{'sitnet_ready' | translate}})</span>
                        <span ng-if="!isLocalReady(inspection.user.id)">({{'sitnet_in_progress' | translate }})</span>
                        <span>{{ $last ? '' : ', ';}}</span>
                    </span>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <h4>
                {{'sitnet_grading_info' | translate}}
            </h4>
        </div>
    </div>
    <div class="row">
        <div class="col-md-3"><strong>{{'sitnet_exam_grade' | translate}}:</strong></div>
        <div class="col-md-9">{{ selections.grade.name }}</div>
    </div>
    <div class="row">
        <div class="col-md-3"><strong>{{'sitnet_exam_choose_credit_type' | translate}}:</strong></div>
        <div class="col-md-9">{{ selections.type.name }}</div>
    </div>
    <div class="row">
        <div class="col-md-3"><strong>{{'sitnet_exam_record_language' | translate}}:</strong></div>
        <div class="col-md-9">{{ selections.language.name }}</div>
    </div>
    <div class="row">
        <div class="col-md-3"><strong>{{'sitnet_exam_credit' | translate}} (op):</strong></div>
        <div class="col-md-9">
            {{exam.customCredit}}
        </div>
    </div>

</div>
